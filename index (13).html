<!DOCTYPE html>
<html lang="es">

<head>


    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ICDE - Negocios inmobiliarios</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/4TfQXSf.png?v=2" />


    <style>
        
        /* ============================= */
        /* 1. Contenedor base .choices   */
        /* ============================= */
        .choices {
            position: relative;
            overflow: hidden;
            font-size: 16px;
        }

        /* ============================= */
        /* 2. Estado focus y último hijo  */
        /* ============================= */
        .choices:focus {
            outline: 0;
        }

        .choices:last-child {
            margin-bottom: 0;
        }

        /* ============================= */
        /* 3. Estado abierto (.is-open)   */
        /* ============================= */
        .choices.is-open {
            overflow: visible;
        }

            /* Color de .choices__inner cuando el select-one está abierto */
            .choices.is-open .choices__inner,
            .choices[data-type*="select-one"].is-open .choices__inner {
                color: rgba(204, 204, 204, 0.3) !important;
            }

        /* ============================= */
        /* 4. Estado deshabilitado        */
        /* ============================= */
        .choices.is-disabled .choices__inner,
        .choices.is-disabled .choices__input {
            background-color: #eaeaea;
            cursor: not-allowed;
            -webkit-user-select: none;
            user-select: none;
        }

        .choices.is-disabled .choices__item {
            cursor: not-allowed;
        }

        /* ============================= */
        /* 5. Elementos ocultos [hidden]  */
        /* ============================= */
        .choices [hidden] {
            display: none !important;
        }

        /* =============================================== */
        /* 6. Cursor para data-type="select-one"          */
        /* =============================================== */
        .choices[data-type*="select-one"] {
            cursor: pointer;
        }

            /* ================================================= */
            /* 7. Estilos específicos para select-one           */
            /* ================================================= */

            /* 7.1. Input dentro de select-one */
            .choices[data-type*="select-one"] .choices__input {
                display: block;
                width: 100%;
                padding: 10px;
                border-bottom: 1px solid #ddd;
                background-color: #fff;
                margin: 0;
            }

            /* 7.2. Botón dentro de select-one (hover y focus) */
            .choices[data-type*="select-one"] .choices__button:focus,
            .choices[data-type*="select-one"] .choices__button:hover {
                opacity: 1;
            }

            /* 7.3. Box-shadow al hacer focus en el botón */
            .choices[data-type*="select-one"] .choices__button:focus {
                box-shadow: 0 0 0 2px #005f75;
            }

            /* 7.4. Ocultar el botón en placeholder */
            .choices[data-type*="select-one"] .choices__item[data-placeholder] .choices__button {
                display: none;
            }

            /* 7.5. Flecha desplegable (::after) */
            .choices[data-type*="select-multiple"]::after {
                content: "";
                height: 0;
                width: 0;
                border-style: solid;
                border-color: dimgrey transparent transparent;
                border-width: 5px;
                position: absolute;
                right: 13px;
                top: 50%;
                margin-top: -2.5px;
                pointer-events: none;
            }

            /* 7.6. Flecha invertida cuando está abierto */
            .choices[data-type*="select-one"].is-open::after {
                border-color: transparent transparent #333;
                margin-top: -7.5px;
            }

            /* 7.7. Ajustes RTL para la flecha */
            .choices[data-type*="select-one"][dir=rtl]::after {
                left: 11.5px;
                right: auto;
            }

            /* 7.8. Ajustes RTL para el botón dentro de select-one */
            .choices[data-type*="select-one"][dir=rtl] .choices__button {
                right: auto;
                left: 0;
                margin-left: 25px;
                margin-right: 0;
            }

        /* ================================================= */
        /* 8. Estilos para select-multiple y tipo text       */
        /* ================================================= */

        /* 8.1. Cursor para inner en select-multiple y text */
        .choices[data-type*="select-multiple"] .choices__inner,
        .choices[data-type*="text"] .choices__inner {
            cursor: text;
        }

        /* 8.2. Botón en select-multiple y text */
        .choices[data-type*="select-multiple"] .choices__button,
        .choices[data-type*="text"] .choices__button {
            position: relative;
            display: inline-block;
            margin: 0-4px 0 8px;
            padding-left: 16px;
            border-left: 1px;
            color: #FFFFFF;
            background-size: 8px;
            width: 8px;
            line-height: 1;
            border-radius: 0;
        }

            /* 8.3. Hover y focus para el botón en select-multiple y text */
            .choices[data-type*="text"] .choices__button:focus,
            .choices[data-type*="text"] .choices__button:hover {
                opacity: 1;
            }

        /* ================================================= */
        /* 9. Botón "X" general (.choices__button)           */
        /* ================================================= */
        .choices__button {
            position: absolute;
            top: 6px;
            right: 6px;
            width: 16px;
            height: 16px;
            border: none !important;
            background: none;
            cursor: pointer;
            background: transparent !important;
            background-repeat: no-repeat;
            background-position: center;
            text-indent: -9999px; /* Oculta el texto */
            color: white !important; /* X en blanco */
            opacity: 1 !important; /* asegúrate que sea totalmente visible */
            font-size: 1rem; /* ajusta si quieres más grande o pequeño */
            line-height: 1 !important;
        }

            /* 9.1. Quitar foco en botón e input */
            .choices__button:focus,
            .choices__input:focus {
                outline: 0;
            }

        /* ================================================= */
        /* 10. Input general .choices__input                  */
        /* ================================================= */
        .choices__input {
            display: inline-block;
            vertical-align: baseline;
            background-color: #f9f9f9;
            font-size: 14px;
            margin-bottom: 2px;
            border: 0;
            border-radius: 0;
            max-width: 100%;
            padding: 8px 0 4px 2px;
        }

            /* 10.1. Ocultar botones nativos de 'search' en Webkit */
            .choices__input::-webkit-search-cancel-button,
            .choices__input::-webkit-search-decoration,
            .choices__input::-webkit-search-results-button,
            .choices__input::-webkit-search-results-decoration {
                display: none;
            }

            /* 10.2. Ocultar clear/reveal en IE/Edge */
            .choices__input::-ms-clear,
            .choices__input::-ms-reveal {
                display: none;
                width: 0;
                height: 0;
            }

        /* 10.3. Ajuste RTL para input */
        [dir=rtl] .choices__input {
            padding-right: 2px;
            padding-left: 0;
        }

        /* ================================================= */
        /* 11. Placeholder y estado de placeholder            */
        /* ================================================= */
        .choices__placeholder {
            opacity: .9;
        }

        /* ================================================= */
        /* 12. Icono "X" generado con ::after en el botón     */
        /* ================================================= */
        .choices__button::after {
            content: "x";
            position: absolute;
            top: -4px;
            right: -13px;
            width: 16px;
            height: 16px;
            font-size: 14px;
            line-height: 16px;
            text-align: center;
            color: white;
            background-color: transparent;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cline x1='7' y1='7' x2='17' y2='17' stroke='white' stroke-width='2.5' stroke-linecap='round'/%3E%3Cline x1='7' y1='17' x2='17' y2='7' stroke='white' stroke-width='2.5' stroke-linecap='round'/%3E%3C/svg%3E");
            border-radius: 50%;
        }

        /* ================================================= */
        /* 13. Estilos override para select-multiple y text   */
        /* ================================================= */
        .choices[data-type*="select-multiple"] .choices__button,
        .choices[data-type*="text"] .choices__button {
            background-image: none !important;
            border-left: none !important;
            padding-left: 4px !important; /* oprime un poco el padding */
            margin: 0 4px !important;
            color: white !important;
            font-size: 1rem !important;
            line-height: 1 !important;
            background-color: transparent !important;
        }

            /* 13.1. Quitar foco azul en select-multiple */
            .choices[data-type*="select-multiple"] .choices__button:focus,
            .choices[data-type*="select-multiple"] .choices__item:focus {
                outline: none !important;
                box-shadow: none !important;
            }

        /* ================================================= */
        /* 14. Botón genérico .choices__button y button.choices_button */
        /* ================================================= */
        

            /* Hover opcional para la X */
            .choices__button:hover {
                color: #ccc !important;
            }

        /* ================================================= */
        /* 15. Listas generales                              */
        /* ================================================= */
        .choices__list {
            margin: 0;
            padding-left: 0;
            list-style: none;
        }

        /* 15.1. Lista single */
        .choices__list--single {
            display: inline-block;
            padding: 4px 16px 4px 4px;
            width: 100%;
        }

        /* 15.2. Ajuste RTL para lista single */
        [dir=rtl] .choices__list--single {
            padding-right: 4px;
            padding-left: 16px;
        }

        /* 15.3. Item dentro de lista single */
        .choices__list--single .choices__item {
            width: 100%;
        }

        /* 15.4. Lista multiple */
        .choices__list--multiple {
            display: inline;
        }

            /* 15.5. Item dentro de lista multiple */
            .choices__list--multiple .choices__item {
                display: inline-block;
                vertical-align: middle;
                border-radius: 20px;
                padding: 4px 10px;
                font-size: 12px;
                font-weight: 500;
                margin-right: 3.75px;
                margin-bottom: 3.75px;
                background-color: #005f75;
                border: 1px solid #004a5c;
                color: #fff;
                word-break: break-all;
                box-sizing: border-box;
            }

                

        /* 15.7. Ajuste RTL para items multiple */
        [dir=rtl] .choices__list--multiple .choices__item {
            margin-right: 0;
            margin-left: 3.75px;
        }

        /* 15.8. Item resaltado en multiple */
        .choices__list--multiple .choices__item.is-highlighted {
            background-color: #004a5c;
            border: 1px solid #003642;
        }

        /* 15.9. Estado disabled en lista multiple */
        .is-disabled .choices__list--multiple .choices__item {
            background-color: #aaa;
            border: 1px solid #919191;
        }

        /* ================================================= */
        /* 16. Dropdown y lista expandida                    */
        /* ================================================= */
        .choices__list--dropdown,
        .choices__list[aria-expanded] {
            display: none;
            z-index: 990 !important;
            position: absolute;
            width: 100%;
            background-color: #fff;
            border: 1px solid #ddd;
            top: 100%;
            margin-top: -1px;
            border-bottom-left-radius: 2.5px;
            border-bottom-right-radius: 2.5px;
            overflow: hidden;
            word-break: break-all;
        }

        /* 16.1. Mostrar dropdown cuando está activo */
        .is-active.choices__list--dropdown,
        .is-active .choices__list[aria-expanded] {
            display: block;
        }

        /* 16.2. Cambiar color de borde cuando está abierto */
        .is-open .choices__list--dropdown,
        .is-open .choices__list[aria-expanded] {
            border-color: #b7b7b7;
        }

        /* 16.3. Voltear dropdown cuando está flip */
         .is-flipped .choices__list--dropdown,
         .is-flipped .choices__list[aria-expanded] {
             top: 100%;
             bottom: auto;
             margin-top: -1px;
             margin-bottom: 0;
             border-radius: 0 0 2.5px 2.5px;
            
        }

        /* 16.4. Lista interna dentro de dropdown */
        .choices__list--dropdown .choices__list,
        .choices__list[aria-expanded] .choices__list {
            position: relative;
            max-height: 300px;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
            will-change: scroll-position;
        }

        /* 16.5. Cada item dentro de dropdown */
        .choices__list--dropdown .choices__item,
        .choices__list[aria-expanded] .choices__item {
            position: relative;
            padding: 10px;
            font-size: 14px;
        }

        /* 16.6. Ajuste RTL para items en dropdown */
        [dir=rtl] .choices__list--dropdown .choices__item,
        [dir=rtl] .choices__list[aria-expanded] .choices__item {
            text-align: right;
        }

        /* ================================================= */
        /* 17. Media Query: estilos adicionales en >=640px   */
        /* ================================================= */
        @media (min-width: 640px) {
            /* 17.1. Padding extra para items seleccionables con data-select-text */
            .choices__list--dropdown .choices__item--selectable[data-select-text],
            .choices__list[aria-expanded] .choices__item--selectable[data-select-text] {
                padding-right: 100px;
            }

                .choices__list--dropdown .choices__item--selectable[data-select-text]::after,
                .choices__list[aria-expanded] .choices__item--selectable[data-select-text]::after {
                    content: attr(data-select-text);
                    font-size: 12px;
                    opacity: 0;
                    position: absolute;
                    right: 10px;
                    top: 50%;
                    transform: translateY(-50%);
                }

            /* 17.2. Ajuste RTL para items seleccionables con data-select-text */
            [dir=rtl] .choices__list--dropdown .choices__item--selectable[data-select-text],
            [dir=rtl] .choices__list[aria-expanded] .choices__item--selectable[data-select-text] {
                text-align: right;
                padding-left: 100px;
                padding-right: 10px;
            }

                [dir=rtl] .choices__list--dropdown .choices__item--selectable[data-select-text]::after,
                [dir=rtl] .choices__list[aria-expanded] .choices__item--selectable[data-select-text]::after {
                    right: auto;
                    left: 10px;
                }
        }

        /* 17.3. Item seleccionable resaltado en dropdown */
        .choices__list--dropdown .choices__item--selectable.is-highlighted,
        .choices__list[aria-expanded] .choices__item--selectable.is-highlighted {
            background-color: #f2f2f2;
        }

            /* 17.4. Opacidad del texto extra (data-select-text) cuando está resaltado */
            .choices__list--dropdown .choices__item--selectable.is-highlighted::after,
            .choices__list[aria-expanded] .choices__item--selectable.is-highlighted::after {
                opacity: .5;
            }

        /* ================================================= */
        /* 18. Estilos para items y estados generales        */
        /* ================================================= */
        .choices__item {
            cursor: default;
        }

        .choices__item--selectable {
            cursor: pointer;
        }

        .choices__item--disabled {
            cursor: not-allowed;
            -webkit-user-select: none;
            user-select: none;
            opacity: .5;
        }

        /* 18.1. Heading dentro de dropdown */
        .choices__heading {
            font-weight: 600;
            font-size: 12px;
            padding: 10px;
            border-bottom: 1px solid;
            color: gray;
        }

        /* 18.2. Item con botón deletable */
        .choices__item[data-deletable] {
            position: relative; /* Para posicionar el botón dentro */
            padding-right: 28px; /* Da espacio para la X */
        }

        /* ================================================= */
        /* 19. Estilos personalizados para .filtros           */
        /* ================================================= */
        .filtros {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 0px;
            padding: 30px 25px;
            margin-left: 25px;
            margin-right: 25px;
            column-gap: 25px;
            border-radius: 20px;
            align-items: center;
            justify-content: center;
            position: relative; 
            z-index: 9;
        }

        /* 19.1. Ocultar opciones deshabilitadas en dropdown   */
        .choices__list--dropdown .choices__item[data-choice-disabled] {
            display: none !important;
        }
        .choices__list--dropdown .choices__item:first-child {
             display: none !important;
            
        }

        /* 19.2. Estilo general del contenedor de filtros       */
        .filtros .choices__inner {
            padding: 8px 12px !important;
            font-size: 13px;
            min-width: 120px;
            background-color: rgba(75, 75, 75, 0.1);
            
            border-radius: 0px;
            color: white;
            font-weight: bold;
            transition: background-color 0.3s, color 0.3s;
            outline: none;
            cursor: pointer;
            box-sizing: border-box;
            max-height: 35px !important;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #be8939;
            background-origin: border-box;
            background-clip: padding-box, border-box;
            
        }
        

            .filtros .choices__inner:has(input[placeholder]:not(:placeholder-shown)) {
                height: auto !important;
            }

            .filtros .choices__inner:has(.choices__item[data-value]:not(.choices__item--placeholder)) {
                height: auto !important;
            }

        /* Valor por defecto si no hay selección */
        .filtros .choices__inner {
            height: 30px !important;
            overflow: hidden;
        }
        /* ======================================================== */
        /* 19.2.1. En pantallas < 1663px permitir expansión vertical */
        /* ======================================================== */
        @media (max-width: 1663px) {
            .filtros .choices__inner {
                 
                 max-height: none !important;
            }
        }
            /* 19.3. Color del texto dentro del select en filtros   */
            .filtros .choices__inner,
            .filtros .choices__inner * {
                color: white;
            }

                /* 19.4. Hover del contenedor de filtros                 */
                .filtros .choices__inner:hover {
                    background-color: rgba(255, 255, 255, 0.2);
                    color: #333;
                }

        /* 19.5. Estilo para las opciones desplegadas en filtros */
        .filtros .choices__list--dropdown {
            background-color: #212121 !important;
            color: white;
            border: 1px solid #212121 !important;
            border-radius: 8px;
            
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            font-weight: normal;
            min-width: 400px;
        }

        /* ================================================= */
        /* 20. Letra opciones seleccionadas (multiple)        */
        /* ================================================= */
        .choices[data-type*="select-multiple"] .choices__list--multiple .choices__item {
            background-color: #5c5c5c !important; /* fondo gris oscuro */
            border: 1px solid #5c5c5c !important; /* mismo color de borde */
            color: white !important; /* texto blanco */
            border-radius: 20px !important;
            padding: 4px 10px !important;
            margin: 2px 4px !important;
            outline: none !important; /* quita el outline azul */
        }

        /* ================================================= */
        /* 21. Estilos para #filterBuscar                     */
        /* ================================================= */
        #filterBuscar {
            padding: 8px 12px;
            font-size: 14px;
            min-width: 123px;
            max-width: 129.22px;
           
            background-color: rgba(75, 75, 75, 0.1);
            border-radius: 0px;
            color: white;
            font-weight: bold;
            transition: background-color 0.3s, color 0.3s;
            border: 2px solid transparent;
            border-bottom: 1px solid #be8939;
            
            background-origin: border-box;
            background-clip: padding-box, border-box;
            height: 30px;
            
        }

            /* 21.1. Placeholder dentro de #filterBuscar            */
            #filterBuscar::placeholder {
                color: #b1b1b1;
            }

            /* 21.2. Hover en #filterBuscar                         */
            #filterBuscar:hover {
                background-color: rgba(255, 255, 255, 0.2);
            }

        /* ================================================= */
        /* 22. Input dentro de .filtros                        */
        /* ================================================= */
        .filtros .choices__input {
            background-color: transparent !important;
            border: none !important;
            color: #bfbfbf;
            box-shadow: none !important;
            font-weight: bold;
        }

            /* 22.1. Placeholder dentro de input de .filtros        */
            .filtros .choices__input::placeholder {
                color: #b1b1b1 !important;
            }

        /* ================================================= */
        /* 23. Fondo de lista interna en .filtros              */
        /* ================================================= */
        .filtros .choices__list--dropdown .choices__item {
            background-color: transparent !important;
            color: white !important;
        }

        /* 23.1. Hover en opciones dentro de .filtros           */
        .filtros .choices__item--selectable:hover {
            background-color: #444 !important; /* gris oscuro */
            color: white !important;
        }

        /* ================================================= */
        /* 24. Forzar ancho mínimo para todo en .filtros        */
        /* ================================================= */
        .filtros .choices {
            min-width: 129.22px;
            font-weight: bold;
        }
        /*Número contador*/
        .choices__list--dropdown .choices__item .cuenta {
            font-size: 0.75rem; /* más pequeño que el texto normal */
            color: #b1b1b1; /* gris oscuro */
            font-weight: bold;
            /* opcional: un pequeño margen a la izquierda si quieres separar */
            margin-left: 0.25rem;
        }
        
    </style>
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">

    <style>

        /* Estilos base para tarjetas y etiquetas (basado en tu código original) */

        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background: #070707; /* fondo negro */
            font-family: "Outfit", sans-serif;
            font-optical-sizing: auto;
            font-style: normal;
            font-weight: 100;
            position: relative;
            scroll-behavior: smooth;
            z-index: 0;
            overflow-x: hidden;
        }
        /* 2. Estilos para navegadores WebKit (Chrome, Safari, Edge) */
        ::-webkit-scrollbar {
            width: 13px; /* Ancho de la barra vertical */
            height: 15px; /* Alto de la barra horizontal (si aplica) */
        }

        ::-webkit-scrollbar-track {
            background: #333; /* Color del “track” (fondo de la barra) */
        }

        ::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.2); /* Color del “thumb” (parte que se arrastra) */
            border-radius: 8px; /* Bordes redondeados del thumb */
            border: 4px solid rgba(255, 255, 255, 0.2); /* Margen interno para separarlo del track */
        }

            ::-webkit-scrollbar-thumb:hover {
                background-color: rgba(71, 71, 71, 0.25); /* Color del thumb al pasar el cursor */
            }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                
            }

            to {
                opacity: 1;
                
            }
        }

        

        .modal-overlay.active .modal-contenido {
            animation: modalFadeIn 0.2s ease-out forwards;
        }

        
        .hidden {
            display: none !important;
        }

        .bg {
            position: absolute;
            top: 60px;
            left: 0;
            width: 100%;
            opacity: 0.1;
            z-index: -1;
            overflow: hidden;
        }

            .bg img {
                width: 100%;
                height: auto;
                object-fit: cover;
                display: block;
                filter: blur(3px) saturate(0) brightness(0.5);

            }

        .header {
            position: relative;
            width: 100%;
            /* altura solo para el gif, el menú estará fijo y fuera del flujo */
        }
        #filterBuscar {
            scroll-margin-top: 260px; /* un poco más grande que tu header para respirar */
        }
        /* -------------------------------------------
   Cuando .gif-container tenga .scrolled:
-------------------------------------------- */

        /* HEADER: Banner GIF fijo */
        .header {
            position: relative;
            width: 100%;
        }
        /* cuando abra panel1 o panel2, habilita overflow:visible: */
        .gif-container.open-panel1,
        .gif-container.open-panel2 {
            overflow: visible;
        }
        .gif-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 85px;
            overflow: hidden;
            transition: background 0.3s ease, height 0.3s ease;
            z-index: 1000;
        }

            /* Imagen dentro del banner */
            .gif-container img:not(.logo),
            .gif-container img:first-child {
                display: block;
                width: 100%;
                height: 70px;
                object-fit: cover;
                margin: 0;
                padding: 0;
            }

            /* Menú en el banner */
            .gif-container .menu a {
                display: inline-block;
                color: white;
                text-decoration: none;
                padding: 6px 12px;
                border-radius: 4px;
                transition: transform 0.2s ease, background 0.3s ease;
            }

            /* TOGGLE activo */
            .gif-container.open-panel1 .toggle-services {
                color: #f8c00a;
                background-color: rgba(71, 71, 71, 0.25);
                transform: scale(1.3);
            }

        /* SENTINEL para detectar scroll */
        #header-sentinel {
            position: absolute;
            top: 85px;
            width: 1px;
            height: 1px;
            pointer-events: none;
        }

        /* HEADER FIJO tras scroll */
        .fixed-header {
            display: flex;
            opacity: 0;
            transform: translateY(-100%);
            transition: transform 0.1s ease-in, opacity 0.4s ease-in, visibility 0s linear 0.3s;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            pointer-events: none;
            z-index: 10000;
            align-items: center;
            padding: 0 20px;
            box-sizing: border-box;
            background: linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.35)), url('https://i.imgur.com/kx2n7vi.jpeg') no-repeat center center;
            background-size: cover;
            visibility: hidden;
        }

            .fixed-header .logo {
                height: 40px;
                margin-top: -4px;
                left: 10px !important;
            }

            .fixed-header .menu {
                transform: translateY(45%);
            }

             
       

            .fixed-header.active {
                display: flex;
                visibility: visible;
                opacity: 1;
                transform: translateY(0);
                transition: transform 0.7s ease-out, opacity 0.4s ease-out, visibility 0s linear 0s;
                pointer-events: auto;
            }

        @media (max-width: 767px) {
            .fixed-header .logo {
                height: 53px;
                top: 55% !important;
                left: 110px !important;
                width: 190px !important;
            }
        }

        /* ─────────────────────────────
   PANEL DE SERVICIOS FLOTANTE
────────────────────────────── */

        .services-panel {
            position: fixed;
            top: 40px; /* justo debajo del .gif-container */
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(15px);
            color: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.25);
            opacity: 0;
            transform: translateY(-20px);
            pointer-events: none;
            transition: all 0.3s ease;
            z-index: 10001;
        }

        /* Panel 1 – ancho completo */
        .panel1 {
            left: 10px;
            width: calc(100% - 36px);
        }

        /* Panel 2 – cuadro pequeño */
        .panel2 {
            left: 80%;
            width: 260px;
            height: 124px;
            transform: translateX(30%) translateY(-10px) scale(0.8);
        }

        /* Abrir los paneles */
        .open-panel1 .services-panel.panel1 {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
        }

        .open-panel2 .services-panel.panel2 {
            opacity: 1;
            pointer-events: auto;
            transform: translateX(-50%) translateY(0) scale(1);
        }

        /* Botón de cerrar */
        .salir-servicios {
            position: absolute;
            top: 10px;
            right: 30px;
            font-size: 24px;
            font-weight: bold;
            color: white;
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            text-align: center;
            line-height: 32px;
            z-index: 100;
            transition: background 0.3s ease;
        }

            .salir-servicios:hover {
                background-color: rgba(255, 255, 255, 0.2);
            }

        /* Segundo botón opcional (oculto por ahora) */
        .salir-servicios2 {
            display: none;
        }


            .divider-shadow {
                height: 20px;
                background: linear-gradient(to top, rgba(255,255,255,0), rgba(0,0,0,0.5));
                margin-top: 70px; /* solapa un poco el banner */
            }

            .esquinader {
                position: absolute;
                top: 0;
                left: 0px; /* <- Antes era right: 0 */
                height: 100%;
                z-index: 10;
            }


            .banner-espejo {
                position: absolute;
                top: 0;
                left: 0;
                width: 45%;
                height: 90%;
                background: rgba(0,0,0,0.2);
                backdrop-filter: blur(15px);
                box-shadow: 4px 4px 8px rgba(0,0,0,0.9);
                /* inclinación; cuanto más alto el ángulo, más pronunciada la diagonal */
                transform: skewX(-15deg);
                transform-origin: top left;
                /* ahora sí curva la esquina inferior derecha */
                border-bottom-right-radius: 30px;
            }

            @media (min-width: 768px) {
                .banner-espejo {
                    width: 50vw;
                }
            }

            @media (min-width: 1200px) {
                .banner-espejo {
                    width: 40vw;
                }
            }

        .logo {
            position: absolute;
            top: 12px;
            left: 45px;
            width: 220px !important;
            height: auto !important;
            z-index: 10;
            object-fit: contain;
            filter: brightness(100%) saturate(140%) drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.5));
            pointer-events: auto !important;
            cursor: pointer;
        }

            .menu-container {
                position: absolute;
                top: 0px;
                right: 25px;
                z-index: 10;
                width: auto;
            }

            .menu-icon {
                display: none;
                flex-direction: column;
                justify-content: space-around;
                width: 20px;
                height: 25px;
                cursor: pointer;
            }

                .menu-icon div {
                    width: 100%;
                    height: 3px;
                    background-color: #bfbfbf;
                    transition: background-color 0.3s ease;
                }

            .menu {
                display: flex;
                flex-direction: row;
                align-items: center;
                border-radius: 8px;
                font-weight: 250;
            }

                .menu a {
                    display: inline-block;
                    color: #bfbfbf;
                    text-decoration: none;
                    margin: 0 35px;
                    font-weight: 250;
                    background-color: rgba(0, 0, 0, 0.0); /* blanco casi transparente */
                    padding: 6px 15px; /* espacio arriba/abajo y a los lados */
                    border-radius: 4px; /* bordes redondeados tipo óvalo */
                    box-shadow: 4px 4px 8px rgba(0,0,0,0.4);
                    transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease-in-out;
                }


                    .menu a:hover {
                        color: #f8c00a; /* amarillo */
                        text-decoration: none; /* sin subrayado */
                        background-color: rgba(071, 071, 071, 0.25);
                        transform: scale(1.3);
                    }

            .contador {
                color: #bfbfbf;
                font-size: 15px;
                font-weight: bold;
                margin-bottom: 10px;
                margin-left: 16px;
                margin-top: 10px;
            }
        /* Asegúrate de incluir esto tras tus otros estilos */

        .ordenar-por select {
            padding: 0.25em 0.5em;
            border-radius: 4px;
            background: #2d2d2d;
            color: #aeaeae;
            font-family: "Outfit", sans-serif;
            border: 1px solid transparent;
            background: linear-gradient(to bottom, #373737 0%, #1c1c1c 100%) padding-box, linear-gradient(to bottom, #454545 0%, #373535 30%, #373535 60%, #000000 100% 100%) border-box;
            margin-right: 10px;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent !important;
            -webkit-appearance: none;
            appearance: none;
        }
        .ordenar-por {
            -webkit-tap-highlight-color: grey;
        }

        * {
            -webkit-tap-highlight-color: grey;
        }

        option {
            -webkit-tap-highlight-color: grey;
        }
        select option {
            background-color: #5c5c5c;
            color: white;
            font-size: 14px;
            
        }
            select option:checked {
                background-color: #484444 !important;
                color: white;
            }
            select option:hover {
                background-color: #484444;
            }
            .ordenar-por select:focus {
                outline: none;
                border-color: black;
                box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.2);
            }
        .ordenar-por {
            position: relative;
            display: inline-block;
            margin-left: 1em;
        }
            
            .ordenar-por label {
                color: #fff;
                font-size: 0.9rem;
                margin-right: .5em;
            }

        .sort-toggle {
            
            
            background: #2d2d2d;
            color: #bfbfbf;
            font-family: "Outfit", sans-serif;
            border: 1px solid #be8939;
            
            background-color: rgba(75, 75, 75, 0.15);
            margin-right: 16px;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent !important;
            -webkit-appearance: none;
            appearance: none;
            width: 136px;
            font-weight: 500;
            text-align: center; /* centra en la mayoría de navegadores */
            text-align-last: center;
        }

        .sort-options {
            position: absolute;
            top: 100%;
            left: 0;
            background: #2d2d2d;
            list-style: none;
            margin: 0;
            padding: .2em 0;
            border-radius: 4px;
            box-shadow: 0 2px 6px rgba(0,0,0, .4);
            z-index: 8;
        }

            .sort-options.hidden {
                display: none;
            }

            .sort-options li {
                padding: .4em 1em;
                color: #fff;
                font-size: .95rem;
                white-space: nowrap;
                cursor: pointer;
                width: 121px;
                font-weight: 300;
            }
        #sortToggle {
                font-size: 15.2px;
                padding: 5px 10px;
        }
                .sort-options li:hover {
                    background: #484444;
                }
            .noProp {
                font-size: 1.5rem;
                color: white;
                text-align: center;
                margin-right: 10px;
            }


            #tarjetas {
                display: grid;
                grid-template-columns: repeat(4, 1fr); /* 3 columnas iguales */
                gap: 16px;
                margin-left: 16px;
         margin-right: 16px;
            }

            .tarjetas {
                display: grid;
                grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
                gap: 20px;
            }

            .tarjeta {
                background: #212121;
                position: relative;
                
                box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
                cursor: pointer;
                display: flex;
                flex-direction: column;
                height: 100%;
                overflow: hidden;
                transition: transform 0.15s ease;
            }

                .tarjeta:hover {
                    transform: scale(1.03);
                    background: #2B2B2B;
                }

                .tarjeta img {
                    width: 100%;
                    height: 180px;
                    object-fit: cover;
                }

            .icono-etiqueta {
                width: 15px !important;
                height: 15px !important;
                object-fit: contain;
                flex-shrink: 0;
                border-radius: 0px !important;
                margin-bottom: 0px !important;
                margin-right: 5px;
                align-items: center;
            }

            .icono-etiqueta2 {
                width: 20px !important;
                height: 20px !important;
                object-fit: contain;
                flex-shrink: 0;
                border-radius: 0px !important;
                margin-bottom: 0px !important;
                margin-right: 5px;
                align-items: center;
                margin-top: 7px;
            }



            .tarjeta .contenido {
                position: relative;
                z-index: 1;
            }
            /* Capa extra con degradado dorado en la parte inferior */
            .tarjeta.recomendado::after {
                content: "";
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 100%; /* ajusta altura del degradado */
                pointer-events: none; /* para dejar clickeable el contenido */
                background: radial-gradient( circle at bottom left, transparent 85%, rgba(98, 175, 0) 100% );
                transition: height 0.3s ease;
            }
            /* La “cinta” */
            .ribbon {
                width: 100px; /* longitud de la cinta */
                height: 100px; /* longitud de la cinta */
                position: absolute;
                top: -2px;
                right: -2px;
                overflow: hidden; /* recorta el cuadrado */
                pointer-events: none;
            }

                /* El texto rotado */
                .ribbon span {
                    position: absolute;
                    display: block;
                    width: 150px; /* ancho suficiente para que el texto quepa */
                    padding: 5px 0;
                    background: #62af00; /* mismo dorado */
                    color: white;
                    line-height: 1.2;
                    font-weight: 400;
                    text-align: center;
                    font-size: 13px;
                    transform: rotate(45deg);
                    top: 19px; /* ajusta para centrar la cinta */
                    right: -41px; /* ajusta para centrar la cinta */
                    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                    z-index: 2;
                }

            .contenido {
                padding: 8px;
                padding-bottom: 5px;
                padding-top: 8px;
                display: flex;
                flex-direction: column;
                flex-grow: 1;
                justify-content: space-between;
            }

            .titulo {
                font-weight: 500;
                font-size: 17px;
                margin: 0 0 2px 0;
                color: white;
                margin-top: 0;
                margin-bottom: 3px;
            }

            .tipo {
                font-weight: 600;
                color: #b1b1b1;
                margin-top: 0;
                margin-bottom: 3px;
                font-size: 15px;
            }
.codigo {
    color: #bfbfbf !important;
font-weight: 500; 
}
        
            .codigo, .precio {
                font-size: 14px;
                margin-top: 0;
                margin-bottom: 3px;
            }

            . {
                color: #b1b1b1;
                font-weight: bold;
                font-size: 12px; /* tamaño más pequeño */
            }

            .precio {
                margin-top: 10px; /* espacio mayor arriba */
                margin-bottom: 10px; /* espacio mayor abajo */
                color: #22c55e; /* verde normal */
                font-weight: bold;
                font-size: 16px;
                transition: color 0.3s ease;
                margin-top: 0;
                margin-bottom: 10px;
            }

            .etiquetas {
                display: flex;
                flex-wrap: wrap;
                gap: 3px;
                margin-top: auto;
                margin-bottom: 10px;
            }

            .etiqueta {
                background-color: #333333;
                color: #bfbfbf;
                padding: 3px 6px;
                
                font-weight: 500;
                display: inline-flex;
                align-items: center; /* Centra verticalmente */
                gap: 0rem; /* Espacio entre ícono y texto (opcional) */
                font-size: 0.71rem; /* Ajusta según tu diseño */
                line-height: 1.25rem;
            }



            .precio:hover {
                color: #15803d; /* verde más oscuro en hover */
            }


            /* Para tarjetas externas */
            .titulo,
            .tipo,
            .codigo {
                margin-top: 0;
                margin-bottom: 3px; /* Espacio uniforme entre ellos */
            }

            .comparar-container label {
                color: #bfbfbf; /* Cambia el color del texto */
                font-weight: 200; /* Hace el texto un poco más fuerte */ /* Margen desde el borde izquierdo del contenedor */
                margin-top: 9px;
                margin-bottom: 9px;
                cursor: pointer; /* Hace que el cursor sea una mano */
                display: flex; /* Alinea checkbox y texto horizontalmente */
                align-items: center;
                justify-content: center;
                gap: 6px; /* Espacio entre checkbox y texto */
            }

                .comparar-container label:hover {
                    color: #be8939; /* Un tono un poco más oscuro en hover */
                    transform: scale(1.15);
                }

            /* Etiquetas sin margen superior extra, solo margen inferior si quieres */
            .etiquetas {
                margin-top: 0;
                margin-bottom: 0;
            }

            /* Modal */
            .modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.6);
                display: none;
                align-items: center;
                justify-content: center;
                z-index: 10002;
            }

                .modal-overlay.active {
                    display: flex;
                }

        .modal-close {
            position: absolute;
            z-index: 10;
            top: 10px;
            right: 15px;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            border-radius: 50%;
                        color: #484848;
            background: #dfdfdf;
        }

            .modal img {
                width: 100%;
                max-height: 300px;
                object-fit: cover;
                border-radius: 6px;
                margin-bottom: 10px;
                margin-right: 5px;
            }

            .modal h2 {
                margin-top: 0;
                font-weight: bold;
            }

            .modal .tipo {
                color: #b1b1b1;
                font-weight: 600;
            }

            .modal p {
                margin: 10px 0;
            }

            .modal .boton-fotos {
                background-color: #dfdfdf;
                color: #474747;
                margin: 50px 70px 0 auto; /* margen arriba opcional */
                font-weight: bold;
                padding: 8px 16px;
                border-radius: 5px;
                cursor: pointer;
                font-size: 12px;
                text-decoration: none;
                display: inline-block;
                margin-top: 0px;
                transition: background-color 0.3s;
            }

            #modalTitle {
                color: white; /* Cambia este valor por el color que prefieras */
                margin-top: 20px !important,
            }

            .modal .boton-fotos:hover {
                background-color: #c6c6c6;
            }

            .modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.6);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10002;
            }

                .modal-overlay:not(.active) {
                    display: none;
                }

            .modal {
                background: #1e1e1e;
                
                max-width: 800px;
                max-height: 96vh;
                overflow-y: auto;
                padding: 20px;
                position: relative;
                display: flex;
                flex-direction: column;
            }

                .modal::-webkit-scrollbar {
                    width: 2px;
                }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            background: none;
            border-radius: 50%;
            width: 30px;
            color: #484848;
            background: #dfdfdf;
        }

                .modal-close:hover {
                    transform: scale(1.2);
                    font-weight: 700;
                    color: #dfdfdf
                }

            .modal-contenido {
                display: flex;
                flex-wrap: nowrap;
                gap: 20px;
                position: relative;
            }

            .modal-columna-izq {
                flex: 1 1 300px;
                max-width: 300px;
                display: flex;
                flex-direction: column;
                gap: 0px;
            }

            .modal-imagen {
                width: 100%;
                height: 300px;
                object-fit: cover;
                
            }

            .modal-bloque-info {
                font-size: 14px;
                color: #333;
            }

                .modal-bloque-info p {
                    margin: 6px 0;
                }

            .modal-etiquetas {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin-top: 8px;
            }

            .modal-etiqueta {
                background-color: #333333;
                color: #cccccc;
                font-size: 12px;
                padding: 4px 8px;
                
                font-weight: 600;
                display: inline-flex;
                align-items: center;
                gap: 4px;
            }

            .modal-columna-der {
                flex: 1 1 300px;
                display: flex;
                flex-direction: column;
                margin-left: 50px;
            }

            .modal-titulo {
                font-weight: bold;
                font-size: 24px;
                margin: 0 0 6px 0;
                color: white;
            }

            .modal-subtitulo {
                font-weight: 600;
                font-size: 18px;
                color: #cccccc;
                margin-bottom: 10px;
                border-bottom: 2px solid #be8939;
                padding-bottom: 4px;
            }

            .modal-tabla-caracteristicas {
                border-collapse: collapse;
                width: 240px;
                height: 216px;
                font-size: 14px;
                margin-bottom: 12px;
                table-layout: auto;
                color: #cccccc
            }

                .modal-tabla-caracteristicas th,
                .modal-tabla-caracteristicas td {
                    padding: 4px 6px;
                    border: 1px solid #bfbfbf;
                    word-break: break-word;
                }

                .modal-tabla-caracteristicas th {
                    background-color: #eef;
                    font-weight: 600;
                    text-align: left;
                }

                .modal-tabla-caracteristicas th {
                    background-color: #f0f0ff;
                }



            .modal-puntos-clave {
                font-size: 18px;
                color: #322F2C;
            }

                .modal-puntos-clave strong {
                    display: block;
                    margin-bottom: 6px;
                    border-bottom: 2px solid #D4AF37;
                }

            .modal-descripcion {
                font-size: 14px;
                line-height: 1.4;
                margin-top: 20px;
            }

            #modalOverlay > div {
                width: 100%;
                max-width: 700px; /* o el valor que prefieras */
                margin: 0 auto; /* centrado horizontal */
            }

            #modalImagen {
                width: 350px;
                height: 250px; /* o usa aspect-ratio si lo prefieres */
                object-fit: cover;
                
            }

            .boton-fotos {
                background-color: #4B5563;
                color: white;
                padding: 0px 0px;
                
                text-decoration: none;
                display: inline-block;
                margin-top: 5px;
                width: fit-content;
            }

            .modal-columna-der {
                flex: 1 1 360px;
                display: flex;
                flex-direction: column;
                max-width: 100%; /* o puedes poner 380px si quieres limitar aún más */
            }

            .pagina-btn {
                padding: 0.5rem 1rem;
                margin: 0 0.25rem;
                border: 1px solid #ccc;
                background-color: white;
                cursor: pointer;
                border-radius: 0.375rem;
                transition: background-color 0.2s;
            }

                .pagina-btn:hover {
                    background-color: #f0f0f0;
                }

            .boton-paginacion {
                background-color: #f0f0f0;
                border: none;
                margin: 4px;
                padding: 6px 12px;
                font-weight: normal; /* Negrita desactivada completamente */
                border-radius: 5px;
                cursor: pointer;
                font-size: 14px;
                transition: background-color 0.2s;
                color: #000; /* Texto negro */
            }

                .boton-paginacion:hover:not(.boton-deshabilitado) {
                    background-color: #e0e0e0;
                }

                .puntos-paginacion {
                    color:white;
                }
            .boton-deshabilitado {
                opacity: 0.5;
                cursor: not-allowed;
            }

        /*.btn-limpiar {
                padding: 8px 16px;
                background-color: #b1b1b1;
                color: #2d2d2d;
                border: none;
                border-radius: 20px;
                font-weight: bold;
                cursor: pointer;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                transition: background-color 0.3s;
                height: 32.5px;
            }*/
        .btn-limpiar {
            position: relative;
            display: inline-block;
            padding: 14px;
            width: 129.22px;
            padding-left: 16px;
            padding-right: 16px;
            border-radius: 0px;
            border: 2px solid transparent;
            background-origin: border-box;
            background-clip: padding-box, border-box;
            background-color: #bfbfbf;
            cursor: pointer;
            height: 33px;
            line-height: 2.5px;
            transition: all 0.3s;
            overflow: visible;
            font-weight: 600;
            color: #2f2f2f;
        }

            /* Texto con degradado vertical 0% #252424 → 100% #3c3c3c */
            .btn-limpiar span {
                display: inline-block;
                /* Para aplicar degradado en texto */
                background: linear-gradient(to bottom, #252424 0%, #3c3c3c 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                /* Compatibilidad en Firefox: */
                background-clip: text;
                color: transparent;
                font-weight: bold;
                text-align: center;
                /* Evitamos que el span ocupe toda la anchura; centrado en el botón por line-height y text-align del botón */
            }

            /* Sombra difusa “bajo” el botón: copiamos la forma redondeada y la enviamos atrás con un degradado y blur */
            .btn-limpiar::after {
                content: "";
                position: absolute;
                top: 17px;
                left: 2px;
                right: 2px;
                bottom: 0px;
                border-radius: inherit;
                background: linear-gradient(to right, #000000 0%, #000000 100%);
                opacity: 0.5;
                filter: blur(10px);
                transform: translateY(1px);
                z-index: -1;
            }



                .btn-limpiar:hover {
                    background-color: rgba(255,255,255,0.2);
                }

            .hidden {
                display: none !important;
            }

            .pagina-actual {
                background-color: #d4d4d4; /* Gris más oscuro para resaltar */
                color: #000;
                font-weight: bold;
            }

            #paginacion {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                margin-top: 1.5rem;
                margin-bottom: 1.5rem;
            }


                #paginacion button {
                    background-color: #373737; /* gris claro */
                    color: white; /* negro */
                    font-weight: normal;
                    border: none;
                    padding: 6px 10px;
                    font-size: 0.7rem;
                    border-radius: 6px;
                    cursor: pointer;
                    transition: background-color 0.2s ease;
                }

                #paginacion .pagina-actual {
                    background-color: #858585 !important;
                    color: white !important;
                    font-weight: bold !important;
                }

                #paginacion button:hover {
                    background-color: #d6d6d6; /* gris un poco más oscuro al pasar el mouse */
                }



            .modal-bloque-info > .titulo {
                margin-bottom: 3px
            }
            /* Ajustar márgenes para título, tipo, código */
            .modal-bloque-info > #modalTitle,
            .modal-bloque-info > .tipo,
            .modal-bloque-info > #modalCodigo {
                margin-top: 0;
                margin-bottom: 3px; /* espacio pequeño entre ellos */
            }

            .modal-bloque-info > #modalTitle {
                margin-top: 10px !important;
            }

            /* Más espacio arriba y abajo para precio */
            .modal-bloque-info > .precio {
                margin-top: 10px;
                margin-bottom: 10px;
                color: #22c55e; /* verde */
                font-weight: bold;
            }

            /* Etiquetas con espacio normal o sin margen extra */
            .modal-bloque-info > .modal-etiquetas {
                margin-top: 0;
                margin-bottom: 0;
            }





            .modalCodigo {
                color: #b1b1b1;
                font-weight: bold;
                font-size: 12px; /* tamaño más pequeño */
            }

            .modal-texto {
                font-size: 14px; /* tamaño igual */
                line-height: 1.4; /* interlineado igual */
                color: #ccc; /* mismo color */
                margin-top: 0px; /* margen uniforme */
                margin-bottom: 10px;
            }

        .frase-container {
            display: flex;
            justify-content: center;
            margin-top: 1px;
            margin-bottom: 9px;
            text-align: center;
            height: 70px;
            padding: 0 1.5rem;
        }

            .frase-text {
                opacity: 0;
                animation: fadeInUp 1s ease-out forwards;
                color: #bfbfbf;
                font-family: "Outfit", sans-serif;
            
                font-weight: 300;
                font-size: 0.60rem;
                line-height: 1.4;
            }

                .frase-text h1 {
                    font-weight: 300;
                    font-size: 1rem; /* si quieres el tamaño igual */
                    line-height: 1.4;
                    color: #bfbfbf; /* color gris claro */
                }
            /* Estilos generales para el pie de página */
            .PiePagina-container {
                background-color: rgba(0, 0, 0, 0.2);
                box-shadow: 0 25px 45px rgba(0, 0, 0, 0.2);
                color: #f3f4f6;
                padding: 2rem;
                margin-bottom: 20px;
                backdrop-filter: blur(15px);
            }

            /* Grid responsive */
            .PiePagina-grid {
                display: flex;
                flex-direction: row;
            }

            /* Columna de imagen y título */
            .PiePagina-titulo {
                font-size: 1.3rem;
                text-align: center;
                border-bottom: 2px solid #be8939; /* amarillo */
                padding: 0 1rem; /* controla qué tanto se extiende */
                padding-bottom: 5px;
                font-weight: 500;
                letter-spacing: 0.2em;
                margin-bottom: 3rem;
                margin-top: 0.2rem;
            }

            .PiePagina-col.derecha {
                /* ajusta según altura del título */
                margin-left: 3.5rem;
                margin-top: -1.7rem;
                font-size: 1.2rem;
            }

            .PiePagina-mapa {
                display: flex;
                justify-content: center;
                align-items: center;
                margin: 3rem auto;
                border: 3px outset #be8939;
                border-radius: 0px;
                overflow: hidden;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
                height: 250px;
                width: 100%;
                max-width: 600px;
            }

                .PiePagina-mapa iframe {
                    width: 100%;
                    height: 100%;
                    filter: sepia(10%) hue-rotate(10deg) saturate(130%);
                    transition: transform 0.3s ease;
                }

                .PiePagina-mapa:hover iframe {
                    transform: scale(1.05);
                }

            .PiePagina-img {
                max-width: 85%;
                height: auto;
                border-radius: 0.5rem;
                display: block;
                align-items: center;
                margin: 0 auto;
            }

            /* Columna derecha */
            .PiePagina-col {
                flex: 1;
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }

            /* Títulos de sección */
            .PiePagina-heading {
                font-weight: 300;
                font-size: 1.3rem;
                margin-bottom: 0.5rem;
                margin-top: 25px;
                letter-spacing: 0.1rem;
                color: #ffffff;
            }
            /* Redes sociales */
            .PiePagina-socials {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 20px;
                margin: 20px auto;
                max-width: 100%;
            }

                .PiePagina-socials img {
                    width: 40px;
                    height: 40px;
                    transition: transform 0.3s ease;
                }

                    .PiePagina-socials img:hover {
                        transform: scale(1.1);
                    }

            .spinner-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 2rem;
                color: #444;
                font-size: 1.1rem;
                text-align: center;
                animation: fadein 0.5s ease-in-out;
            }

            .logocarga {
                width: 80px;
                height: auto;
                margin-bottom: 1rem;
                animation: spin 2s linear infinite;
            }

            .shine {
                width: 100px;
                height: 5px;
                background: linear-gradient(90deg, #be8939 25%, transparent 100%);
                animation: shimmer 1.5s infinite;
                margin: 0 auto 1rem;
                margin-bottom: 1rem;
            }



            @keyframes shimmer {
                0% {
                    transform: translateX(-100%);
                    opacity: 0.2;
                }

                50% {
                    opacity: 1;
                }

                100% {
                    transform: translateX(100%);
                    opacity: 0.2;
                }
            }

            @keyframes fadein {
                from {
                    opacity: 0;
                }

                to {
                    opacity: 1;
                }
            }

            .loading-text {
                margin-top: 1rem;
                font-size: 1.1rem;
                font-weight: 300;
                color: #be8939; /* dorado suave */
                text-shadow: 0 0 4px rgba(190, 137, 57, 0.4);
                animation: pulse-glow 2s infinite ease-in-out;
            }

            @keyframes pulse-glow {
                0% {
                    text-shadow: 0 0 4px rgba(190, 137, 57, 0.25);
                }

                50% {
                    text-shadow: 0 0 10px rgba(190, 137, 57, 0.4), 0 0 10px rgba(190, 137, 57, 0.2);
                }

                100% {
                    text-shadow: 0 0 4px rgba(190, 137, 57, 0.25);
                }
            }

        @media (max-width: 600px) {
            .whatsapp-float {
                position: fixed;
                bottom: 15px;
                right: 15px !important;
            }
        }
            .whatsapp-float {
                position: fixed;
                bottom: 15px;
                right: 35px;
                z-index: 999;
                padding: 0px;
                border-radius: 50%;
                box-shadow: 0 4px 7px rgba(0, 0, 0, 0.8);
                transition: transform 0.2s ease-in-out;
            }

                .whatsapp-float:hover {
                    transform: scale(1.3);
                }

                .whatsapp-float img {
                    width: 50px;
                    height: 50px;
                    display: block;
                    filter: saturate(100%);
                }

            #compararModal.modal-overlay {
                justify-content: center;
                align-items: center; /* para que el contenido quede centrado vertical dentro del padding */
            }


            .banner-comparar {
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                background: white;
                border-top: 2px solid #be8939; /* línea dorada */
                padding: 1rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
                z-index: 50;
                gap: 8px;
                box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            }

            .miniaturas-comparar {
                display: flex;
                gap: 0.75rem;
                overflow-x: auto;
                overflow-y: hidden;
                /* espacio para el tooltip */
            }

            .miniatura span {
                color: #be8939; /* dorado */
                font-weight: 600;
            }

            .miniaturas-comparar .miniatura {
                display: flex;
                align-items: center;
                bottom: 15px;
                gap: 0.5rem;
                background: #f3f4f6;
                padding: 0.5rem;
                border-radius: 0.5rem;
                position: relative;
                font-size: 0.875rem;
            }

            .miniaturas-comparar img {
                width: 40px;
                height: 40px;
                object-fit: cover;
                border-radius: 0.375rem;
            }

            .btn-x-tooltip {
                background: transparent;
                border: none;
                color: white;
                font-size: 1.5rem;
                margin-left: 0.2rem;
                font-weight: 600;
                cursor: pointer;
            }

            .miniaturas-comparar .btn-x {
                position: absolute;
                top: 0;
                right: 4px;
                font-size: 1rem;
                color: #e11d48;
                background: transparent;
                border: none;
                cursor: pointer;
            }

        .chip-miniatura {
            background: #ab7d38;
            padding: 0.3rem 0;
            border-radius: 0.5rem;
            font-size: 0.6rem;
            display: inline-flex;
            align-items: center;
            position: relative;
            cursor: pointer;
            width: 120px;
            gap: 0.3rem;
            color: white;
        }

                .chip-miniatura span {
                    color: black;
                    font-weight: 500;
                }

            .chip-thumb {
                width: 16px;
                height: 16px;
                object-fit: cover;
                border-radius: 3px;
            }

            .btn-x-tooltip-interno {
                position: absolute;
                top: 0.25rem;
                right: 0.25rem;
                background: transparent;
                border: none;
                color: white;
                font-size: 0.9rem;
                cursor: pointer;
            }
        .chip-imagen {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0px 12px;
        }
        
        .chip-code {
            font-size: 0.875rem;
            color: white !important;
        }

            .chip-separator {
                width: 2px; /* grosor de la barra */
                height: 1.5rem; /* altura de la barra */
                background-color: #d1d5db; /* color dorado suave o gris claro */
                
                flex-shrink: 0;
            }

            .tooltip-miniatura {
                visibility: hidden;
                opacity: 0;
                transition: opacity 0.2s ease, visibility 0.2s ease;
                background: #ab7d38;
                border-radius: 0.5rem;
                padding: 0.2rem;
                box-shadow: 0 2px 8px rgba(0,0,0,0.15);
                text-align: center;
                min-width: 80px;
                max-width: 80px;
                width: max-content;
                position: absolute;
                z-index: 100;
            }

            .group:hover .tooltip-miniatura {
                opacity: 1;
                visibility: visible;
            }


            .tooltip-miniatura img {
                display: block;
                width: 80px;
                height: 60px;
                object-fit: cover;
                border-radius: 0.375rem;
            }

            .btn-comparar {
                background-color: #facc15;
                color: #1f2937;
                font-weight: 400;
                padding: 0.5rem 1rem;
                border-radius: 0.5rem;
                transition: all 0.3s ease;
            }

                .btn-comparar:hover {
                    background-color: #eab308;
                }

        .modal-comparar {
            background: #1e1e1e;
            border-radius: 0px;
            width: 100%; /* 70px margen a ambos lados */
            max-width: 100%; /* 1365px - 2×70px */
            max-height: 90%;
            top: 30px;
            overflow-y: auto;
            position: relative;
            padding: 10px;
            display: flex;
            flex-direction: column;
            z-index: 10002;
        }

                .modal-comparar::-webkit-scrollbar {
                    width: 2px;
                }


            /* Reutilizamos .modal-close */
            .comparar-modal-contenido {
                display: flex;
                flex-wrap: nowrap;
                gap: 20px;
                margin-bottom: 20px;
            }

            .btn-cerrar {
                position: absolute;
                top: 10px;
                right: 30px;
                font-size: 28px;
                background: none;
                border: none;
                cursor: pointer;
                color: white;
            }

            .comparar-propiedades {
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
            }

            .tarjeta-comparacion {
                flex: 1;
                min-width: 45%;
                border: 1px solid #ccc;
                padding: 10px;
                box-sizing: border-box;
            }

            /* Columnas adaptadas */
            .comparar-modal-contenido .modal-columna-izq,
            .comparar-modal-contenido .comparar-col-der {
                flex: 1 1 45%;
                max-width: 45%;
            }

            /* Estilo de tabla extendido */
            .comparar-tabla {
                border-collapse: collapse;
                color: #cccccc;
                width: calc(100% - 40px);
                margin: 20px;
            }

                .comparar-tabla th,
                .comparar-tabla td {
                    padding: 8px;
                    border: 1px solid #bfbfbf;
                    text-align: center;
                }

                .comparar-tabla th {
                    background-color: #333;
                    color: #fff;
                    font-weight: 600;
                }

                .comparar-tabla td:first-child {
                    font-weight: bold;
                    background: #2a2a2a;
                    text-align: left;
                }

                .comparar-tabla th:first-child,
                .comparar-tabla td:first-child {
                    white-space: nowrap; /* evita que el texto haga wrap */
                    width: 1%; /* fuerza que solo ocupe lo mínimo */
                }


            /* Ambas columnas usan ahora este bloque */
            .comparar-modal-contenido .modal-bloque-info > h2,
            .comparar-modal-contenido .modal-bloque-info > .tipo,
            .comparar-modal-contenido .modal-bloque-info > .modalCodigo,
            .comparar-modal-contenido .modal-bloque-info > .precio {
                margin: 0 0 6px 0; /* espaciado vertical idéntico al de la derecha */
            }

            .comparar-modal-contenido .modal-bloque-info > h2 {
                color: white; /* título en blanco */
            }

            .comparar-tabla a.boton-fotos:hover {
                background-color: #a47b2a;
            }
            /* Columnas de datos con ancho fijo */
            .comparar-tabla th:nth-child(2),
            .comparar-tabla td:nth-child(2),
            .comparar-tabla th:nth-child(3),
            .comparar-tabla td:nth-child(3) {
                width: 360px; /* coincide con .modal-imagen-comparar */
                vertical-align: top;
                word-wrap: break-word;
            }

            /* Imágenes igual tamaño */
            .modal-imagen-comparar {
                width: calc(100% - 20px); /* ocupa todo el ancho de la columna menos 20px */
                max-width: 360px; /* en caso de que el contenedor sea más ancho */
                height: 350px !important; /* o usa aspect-ratio si lo prefieres */
                object-fit: cover;
                border-radius: 0rem; /* opcional, para redondear esquinas */
                object-fit: cover;
                border-radius: 0px;
                display: block; /* elimina espacios en línea */
                margin: 0 auto; /* centra horizontalmente */
            }
            /* Espaciador vacío */
            .grid-spacer {
                /* nada necesario aquí */
            }

            .comparar-tabla td:nth-child(2),
            .comparar-tabla td:nth-child(3) {
                word-wrap: break-word;
            }
            /* Wrapper de la tabla */
            .comparar-tabla-wrapper {
                grid-column: 1 / span 3;
                margin-top: 0px;
            }

            .comparar-grid {
                display: grid;
                grid-template-columns: 165px 350px 350px;
                grid-template-rows: auto auto;
                gap: 1px;
                align-items: center;
            }

            /* Eliminar líneas y fondo sólo en la fila de botones */
            .comparar-tabla tfoot tr td {
                border: none !important;
                background: transparent !important;
                padding: 12px 0; /* deja espacio vertical, ajusta si lo necesitas */
            }

            /* Centrar los botones dentro de cada celda */
            .comparar-tabla tfoot td {
                text-align: center;
            }

            /* 2. Ocultar líneas solo en la fila de imágenes */
            .comparar-tabla thead tr.fila-imagenes th {
                border: none !important;
                padding: 0; /* quita espacio extra si quieres */
                background: transparent;
            }

                /* Asegura que la segunda y tercera celda (imágenes) quepan justo */
                .comparar-tabla thead tr.fila-imagenes th:nth-child(2),
                .comparar-tabla thead tr.fila-imagenes th:nth-child(3) {
                    width: 400px; /* o el ancho fijo que uses */
                }

            /* Mantén la imagen centrada dentro de la celda */
            .comparar-tabla thead tr.fila-imagenes img {
                display: block;
                max-width: 100%;
                height: auto;
                margin: 0 auto;
            }

            .checkbox-comparar {
                width: 15px;
                height: 15px;
                vertical-align: middle;
                position: relative;
                top: 2px; /* Ajusta a 0px o 2px según lo que veas */
            }





            .modal-comparar-titulo {
                font-size: 1.6rem;
                font-weight: bold;
                text-align: center;
                margin-top: 0px;
                color: white;
            }

            .fila-titulo th {
                background: none !important;
                border: none !important;
                padding: 15px 0 5px !important;
                text-align: center !important;
            }

            .modal-comparar-linea {
                width: 100%;
                height: 3px;
                background-color: #be8939;
                margin: 8px auto 20px auto;
                border-radius: 4px;
            }

            .modal-info-bloque-comparar > * {
                margin-bottom: 10px;
                margin-top: 10px;
            }

            .fila-info {
                background: none !important;
                border: none !important;
            }

                .fila-info th {
                    margin-top: 10px;
                    background: transparent !important;
                    border: none !important;
                    padding: 0 !important;
                    vertical-align: top;
                }


            .modal-comparar .boton-fotos {
                margin-bottom: 15px;
                margin-top: 15px;
                padding: 10px 10px !important; /* o los valores que desees */
                font-size: 1rem;
            }

            #bannerComparar {
                position: fixed;
                bottom: 5px;
                left: 50%;
                transform: translateX(-50%);
                background-color: #be8939;
                
                padding: 5px 24px;
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                z-index: 10002;
                font-weight: 400;
                max-width: 90%;
                width: 1000px;
                text-align: center;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            #btnComparar {
                background-color: white;
                color: #be8939;
                padding: 10px 20px;
                border-radius: 6px;
                font-weight: 700;
                font-size: 1rem;
                border: none;
                cursor: pointer;
                transition: transform 0.2s;
                width: 140px;
            }

                #btnComparar:hover {
                    transform: scale(1.05);
                }

            #btnLimpiarComparar {
                background-color: white;
                color: #be8939;
                padding: 10px 20px;
                border-radius: 6px;
                font-weight: 700;
                font-size: 1rem;
                border: none;
                cursor: pointer;
                transition: transform 0.2s;
                width: 140px;
            }

                #btnLimpiarComparar:hover {
                    transform: scale(1.05);
                }

            @media (min-width: 768px) {
                .comparar-tabla tfoot tr td {
                    padding-top: 20px;
                    text-align: center;
                }

                    /* Asegurarse que los botones queden cada uno debajo de su columna */
                    .comparar-tabla tfoot tr td:first-child {
                        grid-column: 2;
                    }

                    .comparar-tabla tfoot tr td:nth-child(2) {
                        grid-column: 3;
                    }
            }

            .checkmark {
                color: white !important;
                font-weight: bold;
                position: absolute;
                top: 4px; /* esto alinea arriba */
                font-weight: bold;
                font-size: 1.2em;
                user-select: none;
                right: 25px;
            }

        /* Apunta sólo al filtro “Tipo de propiedad” */
        /* Detectamos el input clonado por su aria‑label/placeholder */
        .choices__input--cloned[aria-label="Tipo de inmueble"],
        .choices__input--cloned[placeholder="Tipo de inmueble"] {
            min-width: 20ch !important;
            width: 1ch !important;
        }

        /* Apunta sólo al filtro “Tipo de propiedad” */
        /* Detectamos el input clonado por su aria‑label/placeholder */
        .choices__input--cloned[aria-label="Conjunto"],
        .choices__input--cloned[placeholder="Conjunto"] {
           
            width: 1ch !important;
        }

        .choices__input--cloned[aria-label="Precio"],
        .choices__input--cloned[placeholder="Precio"],
        .choices__input--cloned[aria-label="Zona"],
        .choices__input--cloned[placeholder="Zona"],
        .choices__input--cloned[aria-label="Estrato"],
        .choices__input--cloned[placeholder="Estrato"],
        .choices__input--cloned[aria-label="Barrio"],
        .choices__input--cloned[placeholder="Barrio"],
        .choices__input--cloned[aria-label="Garaje"],
        .choices__input--cloned[placeholder="Garaje"],
        .choices__input--cloned[aria-label="Pisos"],
        .choices__input--cloned[placeholder="Pisos"] {
            width: 13ch !important;
        }
        .botonescontainer {
            display: flex;
            flex-direction: row;
            gap: 0.5rem;
            width: 100%;
            max-width: 20rem;
            align-items: flex-end;
        }
            /* Breakpoints */
        
            @media (max-width: 367px) {
                .logo {
                    filter: drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.9)) brightness(1.1) saturate(1.4);
                    width: 80px !important;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                }

                .choices__input--cloned[aria-label="Conjunto"],
                .choices__input--cloned[placeholder="Conjunto"] {
                    min-width: 11.7ch !important;
                    width: 1ch !important;
                }

                .choices__input--cloned[aria-label="Precio"],
                .choices__input--cloned[placeholder="Precio"],
                .choices__input--cloned[aria-label="Zona"],
                .choices__input--cloned[placeholder="Zona"],
                .choices__input--cloned[aria-label="Estrato"],
                .choices__input--cloned[placeholder="Estrato"],
                .choices__input--cloned[aria-label="Barrio"],
                .choices__input--cloned[placeholder="Barrio"],
                .choices__input--cloned[aria-label="Garaje"],
                .choices__input--cloned[placeholder="Garaje"],
                .choices__input--cloned[aria-label="Pisos"],
                .choices__input--cloned[placeholder="Pisos"]       {
                    width: 11.7ch !important;
                }

                .choices__input--cloned[aria-label="Habitaciones"],
                .choices__input--cloned[placeholder="Habitaciones"] {
                    min-width: 12ch !important;
                }
                .btn-limpiar {
                    position: relative;
                    display: inline-block;
                    padding: 13px;
                    width: 119.09px;
                }
                #filterBuscar {
                    padding: 8px 12px;
                    font-size: 14px;
                    min-width: 119.09px;
                    max-width: 119.09px;
                }
                    .filtros .choices {
                    min-width: 80px;
                    font-weight: bold;
                }

                #paginacion button {
                    
                    font-size: 0.5rem;
                }
                    .checkmark {
                    color: white !important;
                    position: absolute;
                    right: 3px;
                    top: 3px; /* esto alinea arriba */
                    font-weight: bold;
                    font-size: 1em;
                    user-select: none;
                }
            }

            @media (max-width: 385px) {
                .filtros {
                    margin-top: 40px;
                    margin-bottom: 17px;
                }
            }
            /* Para pantallas de hasta 480px */
            @media (max-width: 480px) {
                .logo {
                    filter: drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.9)) brightness(1.1) saturate(1.4);
                    width: 200px !important;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                }

                .gif-container img:not(.logo), .gif-container img:first-child {
                    height: 60px;
                }

                .divider-shadow {
                    height: 10px;
                    margin-top: 60px;
                }

                .menu {
                    top: 50px;
                    right: 10px;
                }

                    .menu a {
                        margin: 0 10px;
                        padding: 4px 8px;
                        font-size: 0.8rem;
                    }

                .frase-text {
                    font-size: 0.5rem;
                }

                    .frase-text h1 {
                        font-size: 0.75rem;
                    }

                .filtros {
                    padding: 15px;
                }

                    .filtros .choices__inner {
                        min-width: 100px;
                        font-size: 12px;
                    }

                #tarjetas {
                    grid-template-columns: repeat(2, minmax(0, 1fr));
                    gap: 8px !important;
                }

                    .frase-text h1 {
        
        MARGIN-TOP: 25PX;
    }
.PiePagina-col.derecha {
        margin-left: 0px !important;
    font-size: 0.9rem;
}

.PiePagina-titulo {
    font-size: 0.76rem;
        margin-bottom: 1.2rem;
}

                .PiePagina-img {
    display: none;
                }
.PiePagina-col {
    gap: 0rem;
}

                .PiePagina-mapa {
                    margin-top: 0rem;
                height: 150px;
                    margin-bottom: 25px;
                
            }

                .PiePagina-container {
    
    padding-bottom: 0px;
}
                .PiePagina-heading {
    
    font-size: 0.7rem;
    margin-bottom: 0rem;
    margin-top: 15px;
                }
                .PiePagina-grid {
                    flex-direction: column;
                }

                .PiePagina-col.derecha {
                    margin-left: 0;
                    margin-top: 0;
                }

                .PiePagina-socials img {
                 width: 30px;
                    height: 30px;
                }

                #bannerComparar {
                    padding: 10px;
                    flex-direction: column;
                    align-items: center;
                }

                #btnComparar {
                    width: 100%;
                    margin-top: 0px;
                }


                #btnLimpiarComparar {
                    width: 100%;
                    margin-top: 2px;
                }
            }
            /* Para pantallas de hasta 600px */
            @media (max-width: 600px) {
                .logo {
                    filter: drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.9)) brightness(1.1) saturate(1.4);
                    width: 250px !important;
                    top: 50%; /* Centrar verticalmente */
                    left: 50%; /* Centrar horizontalmente */
                    transform: translate(-50%, -50%);
                }

                .botonescontainer {
                    display: flex;
                    flex-direction: row;
                }

                .menu {
                    top: 50px;
                    right: 15px;
                }

                    .menu a {
                        margin: 0 15px;
                        padding: 5px 10px;
                        font-size: 0.9rem;
                    }

                .frase-text {
                    font-size: 0.55rem;
                }

                    .frase-text h1 {
                        font-size: 0.8rem;
                    }

                .PiePagina-mapa {
                    width: 80%;
                }

                .PiePagina-grid {
                    flex-direction: column;
                }

                .PiePagina-col.derecha {
                    margin-left: 0px;
                    margin-top: 0;
                }
            }
            /* Para pantallas de hasta 767px */
            @media (max-width: 767px) {
                .logo {
                    filter: drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.9)) brightness(1.1) saturate(1.4);
                    width: 300px !important;
                    top: 42%; /* Centrar verticalmente */
                    left: 110px; /* Centrar horizontalmente */
                    transform: translate(-50%, -50%);
                    height: 53px;
                }

                .btn-cerrar {
                    position: absolute;
                    top: 13px !important;
                    right: 10px !important;
                }


                .menu {
                    top: 55px;
                    right: 20px;
                }

                    .menu a {
                        margin: 0 20px;
                        padding: 6px 12px;
                        font-size: 1rem;
                    }

                .tarjeta.recomendado::after {
                    display: none;
                }

                .frase-text {
                    font-size: 0.6rem;
                }

                    .frase-text h1 {
                        font-size: 0.9rem;
                    }


                .banner-espejo {
                    display: none; /* Oculta el banner espejo */
                }


                .modal-contenido {
                    flex-direction: column; /* De fila a columna */
                    align-items: center; /* Centra las columnas */
                    gap: 20px; /* Espacio entre bloques */
                }

                .modal-columna-izq,
                .modal-columna-der {
                    max-width: 100%; /* Ocupar ancho completo */
                    width: 100%;
                    margin: 0 auto; /* Centrado */
                }

                .modal-columna-der {
                    margin-left: 0; /* Elimina el margen izquierdo */
                }

                .modal-tabla-caracteristicas {
                    width: 100%; /* Hace que la tabla no se corte */
                }

                #modalImagen {
                    width: 100%; /* Imagen adaptada */
                    height: auto;
                    max-height: 300px;
                }

                .modal {
                    max-width: 90vw; /* Menor margen lateral en móviles */
                }

                .modal-comparar .boton-fotos {
                    margin-left: auto;
                    margin-right: auto;
                    margin-top: 10px;
                    margin-bottom: 15px;
                }

                .modal .boton-fotos {
                    margin-top: 5px;
                    margin: auto;
                }

                /* Tabla comparación móvil */
                .comparar-tabla {
                    width: 100%;
                    border-collapse: collapse;
                    table-layout: fixed;
                }

                    /* Celdas iguales ancho y altura */
                    .comparar-tabla th,
                    .comparar-tabla td {
                        border: 1px solid #ccc;
                        width: 50%;
                        box-sizing: border-box;
                        text-align: center;
                        vertical-align: middle;
                        height: 30px; /* Altura fija para todas las filas */
                    }

                    /* Fondo diferente solo en encabezado con nombres de casas */
                    .comparar-tabla thead tr th {
                        /* Color distinto, ej. beige claro */
                        font-weight: bold;
                        padding: 0px, 2px, 0px, 2px;
                    }

                    /* Quitar negrita en columna de características (primera columna de datos) */
                    .comparar-tabla tbody tr td:first-child {
                        font-weight: 200;
                    }

                    /* Negrita en los nombres de casas (segunda y tercera columna de encabezado) */
                    .comparar-tabla thead tr th:nth-child(n+2) {
                        font-weight: bold;
                    }

                    .comparar-tabla th:first-child, .comparar-tabla td:first-child {
                        white-space: normal;
                    }

                .comparar-tabla {
                    border-collapse: collapse;
                    width: 100%;
                    margin: 0px;
                }

                    .comparar-tabla th, .comparar-tabla td {
                        padding: 0px !important;
                    }

                        .comparar-tabla th:nth-child(2),
                        .comparar-tabla td:nth-child(2),
                        .comparar-tabla th:nth-child(3),
                        .comparar-tabla td:nth-child(3) {
                            vertical-align: middle;
                        }

                        .comparar-tabla td:first-child {
                            background-color: rgba(71, 71, 71, 0.25); /* o el color gris que estás viendo */
                        }

                    .comparar-tabla tbody tr th,
                    .comparar-tabla tbody tr td {
                        background-color: rgba(71, 71, 71, 0.25);
                    }

                    .comparar-tabla tbody tr td {
                        font-weight: 200;
                    }

                    .comparar-tabla .fila-codigos th {
                        background-color: rgba(255, 255, 255, 0.2) !important;
                    }

                    .comparar-tabla .fila-caracteristica th {
                        background-color: #333; /* o el color que prefieras */
                        font-weight: 500;
                    }

                .modal-imagen-comparar {
                    width: calc(100% - 20px); /* ocupa todo el ancho de la columna menos 20px */
                    max-width: 360px; /* en caso de que el contenedor sea más ancho */
                    height: 150px !important; /* o usa aspect-ratio si lo prefieres */
                    object-fit: cover;
                    border-radius: 0.5rem; /* opcional, para redondear esquinas */
                    object-fit: cover;
                    border-radius: 6px;
                    display: block; /* elimina espacios en línea */
                    margin: 0 auto; /* centra horizontalmente */
                }

                .comparar-tabla tfoot tr td {
                    text-align: center;
                    padding: 12px 8px;
                }

                .comparar-tabla tfoot .fila-botones td {
                    display: table-cell; /* Normal en móvil */
                }

                .solo-escritorio {
                    display: none !important;
                }

                .comparar-tabla tfoot td {
                    display: block;
                    width: 100%;
                    text-align: center;
                    padding-bottom: 12px;
                }

                .checkmark {
                    color: white !important;
                    font-weight: bold;
                    position: absolute;
                    right: 15px;
                    top: 3px; /* esto alinea arriba */
                    font-weight: bold;
                    font-size: 1.2em;
                    user-select: none;
                }
            }
            /* Para pantallas de hasta 990px */
            @media (max-width: 990px) {
                .logo {
                    width: 350px !important;
                }
               
                    .menu-container {
                    position: absolute;
                    top: 0;
                    right: 20px;
                    display: flex; /* Añadido */
                    align-items: center;
                    height: 30px;
                }

                .menu-icon {
                    display: flex;
                    flex-direction: column;
                    justify-content: space-around;
                    width: 20px;
                    height: 25px;
                    cursor: pointer;
                }

                .menu {
                    display: none;
                    position: absolute;
                    top: 0;
                    right: 0;
                    background-color: rgba(31, 31, 31, 0.8);
                    flex-direction: column;
                    align-items: flex-start;
                    border-radius: 8px;
                    padding: 10px;
                    width: 230px !important;
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
                }

                    .menu a {
                        margin: 5px 0;
                        width: 200px;
                        text-align: center;
                        padding: 8px 12px;
                    }

                    .menu.active {
                        display: flex;
                        background: #070707;
                        width: 200px;
                    }

                .frase-text {
                    font-size: 0.65rem;
                }

                    .frase-text h1 {
                        font-size: 0.95rem;
                    }


                .banner-espejo {
                    width: 40vw !important;
                }



                .gif-container.open-panel1 .panel2 {
                    max-height: 200px; /* ajusta según tu contenido */
                    opacity: 1;
                    pointer-events: auto;
                    width: 230px;
                }

                .gif-container.open-panel2 .panel2 {
                    opacity: 1;
                    pointer-events: auto;
                    transform: none;
                    width: 230px;
                }

                .gif-container.open-panel1 .toggle-services {
                    color: #f8c00a;
                    background-color: rgba(71, 71, 71, 0.25);
                    transform: none;
                }

                .services-panel panel1 {
                    max-width: 120px;
                }


                .salir-servicios2 {
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    font-size: 24px;
                    font-weight: bold;
                    color: white;
                    cursor: pointer;
                    z-index: 100;
                    background-color: rgba(0, 0, 0, 0.3);
                    border-radius: 50%;
                    width: 32px;
                    height: 32px;
                    text-align: center;
                    line-height: 32px;
                    transition: background 0.3s ease;
                }

                .salir-servicios {
                    display: none
                }

                .salir-servicios2:hover {
                    background-color: rgba(255, 255, 255, 0.2);
                }
            }

            @media (max-width: 1150px) {
                .logo {
                    width: 190px !important;
                }
                

                    body {
                        scrollbar-width: none; /* Firefox */
                        -ms-overflow-style: none; /* IE/Edge */
                    }

                    .btn-cerrar {
                        position: absolute;
                        top: 45px;
                    }

                    body::-webkit-scrollbar {
                        display: none; /* Chrome, Safari, Opera */
                    }

                    .menu-container {
                        top: 20px;
                        right: 20px;
                    }

                    .menu-icon {
                        display: flex;
                    }

                    .menu {
                        display: none;
                        position: absolute;
                        top: 100%;
                        right: 0;
                        background-color: rgba(31, 31, 31, 0.8);
                        flex-direction: column;
                        align-items: flex-start;
                        border-radius: 8px;
                        padding: 10px;
                        width: 230px !important;
                        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
                    }

                        .menu a:hover {
                            transform: none;
                        }

                    fixed-header .menu {
                        position: absolute;
                        top: 100%;
                        right: 0;
                        background-color: rgba(31, 31, 31, 0.8);
                        flex-direction: column;
                        align-items: flex-start;
                        border-radius: 8px;
                        padding: 10px;
                        width: 230px !important;
                    }


                    fixed-header .panel2 {
                        top: 240px; /* Lo coloca debajo del panel 1 */
                        left: auto;
                        right: 34px; /* Alineado a la izquierda */
                        width: 186px; /* Ancho completo */
                        margin-top: 10px; /* Espacio entre los paneles */
                        color: white;
                        background: rgba(0,0,0,0.2);
                        backdrop-filter: blur(15px);
                        border-radius: 4px;
                        padding: 20px;
                        z-index: 45;
                        padding-top: 0px;
                        overflow: hidden;
                        transition: max-height 0.8s ease-out, opacity 0.5s ease;
                        transform: none !important; /* Elimina la transformación original */
                        height: auto; /* Elimina la altura fija */
                    }

                    .fixed-header .menu {
                        transform: none !important;
                    }

                    fixed-header .open-panel2 .services-panel.panel2 {
                        transform: none !important;
                    }

                    fixed-header .panel1 {
                        top: 96px;
                        width: 186px;
                        right: 34px;
                        overflow: hidden;
                        left: auto;
                        background: rgba(0,0,0,0.2);
                        backdrop-filter: blur(15px);
                        color: white;
                        background-size: cover;
                        transition: max-height 0.8s ease-out, opacity 0.5s ease;
                        z-index: 40;
                        padding: 20px;
                        box-shadow: 0 4px 8px rgba(0,0,0,0.9);
                        opacity: 0;
                    }

                    .menu a {
                        margin: 5px 0;
                        width: 200px;
                        text-align: center;
                        padding: 8px 12px;
                    }

                    .menu.active {
                        display: flex;
                        background: #333;
                        width: 200px;
                        z-index: 10000;
                    }

                    .frase-text {
                        font-size: 0.65rem;
                    }

                        .frase-text h1 {
                            font-size: 0.95rem;
                        }

                    #tarjetas {
                        grid-template-columns: repeat(3, minmax(0, 1fr));
                    }

                    .tarjeta:hover {
                        transform: none;
                        background: #2B2B2B;
                    }

                    .banner-espejo {
                        width: 30vw;
                    }

                    .panel2 {
                        top: 240px; /* Lo coloca debajo del panel 1 */
                        left: auto;
                        right: 34px; /* Alineado a la izquierda */
                        width: 186px; /* Ancho completo */
                        margin-top: 10px; /* Espacio entre los paneles */
                        color: white;
                        background: rgba(0,0,0,0.2);
                        backdrop-filter: blur(15px);
                        border-radius: 4px;
                        padding: 20px;
                        z-index: 45;
                        padding-top: 0px;
                        overflow: hidden;
                        transition: max-height 0.8s ease-out, opacity 0.5s ease;
                        transform: none !important; /* Elimina la transformación original */
                        height: auto; /* Elimina la altura fija */
                    }


                    .open-panel2 .services-panel.panel2 {
                        transform: none !important;
                    }

                    .panel1 {
                        top: 96px;
                        width: 186px;
                        right: 34px;
                        overflow: hidden;
                        left: auto;
                        background: rgba(0,0,0,0.2);
                        backdrop-filter: blur(15px);
                        color: white;
                        background-size: cover;
                        transition: max-height 0.8s ease-out, opacity 0.5s ease;
                        z-index: 40;
                        padding: 20px;
                        box-shadow: 0 4px 8px rgba(0,0,0,0.9);
                        opacity: 0;
                    }
                    /* cuando abra panel1 o panel2, habilita overflow:visible: */
                    .gif-container.open-panel1,
                    .gif-container.open-panel2 {
                        overflow: visible;
                    }

                    .gif-container.menu-open {
                        overflow: visible !important;
                    }

                    /* 1) El contenedor del menú pasa a fixed en vez de absolute */
                    .gif-container .menu-container {
                        position: fixed !important;
                        top: 20px !important;
                        right: 20px !important;
                        z-index: 10002 !important; /* por encima de todo */
                    }

                    /* 2) Asegura que el propio menú y sus paneles no queden recortados */
                    .gif-container .menu,
                    .gif-container .services-panel {
                        overflow: visible !important;
                    }

                    .gif-container.open-panel1 .panel2 {
                        max-height: 200px; /* ajusta según tu contenido */
                        opacity: 1;
                        pointer-events: auto;
                        width: 230px;
                    }

                    .gif-container.open-panel2 .services-panel.panel2 {
                        transform: none !important;
                        transition: max-height 0.3s ease, opacity 0.3s ease !important;
                    }
                    /* También quita transform en estado base, si no lo has eliminado aún */
                    .services-panel.panel2 {
                        transform: none !important;
                    }

                    .gif-container.open-panel2 .panel2 {
                        opacity: 1;
                        pointer-events: auto;
                        width: 187px;
                        transform: none !important;
                    }

                    .gif-container.open-panel1 .toggle-services {
                        color: #f8c00a;
                        background-color: rgba(71, 71, 71, 0.25);
                        transform: none;
                    }

                    .services-panel panel1 {
                        max-width: 120px;
                    }

                    .salir-servicios2 {
                        display: block;
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        font-size: 24px;
                        font-weight: bold;
                        color: white;
                        cursor: pointer;
                        z-index: 100;
                        background-color: rgba(0, 0, 0, 0.3);
                        border-radius: 50%;
                        width: 32px;
                        height: 32px;
                        text-align: center;
                        line-height: 32px;
                        transition: background 0.3s ease;
                    }

                    .salir-servicios {
                        display: none
                    }

                    .salir-servicios2:hover {
                        background-color: rgba(255, 255, 255, 0.2);
                    }
                }

            @media (max-width: 480px) {


                #tarjetas {
                    grid-template-columns: repeat(2, minmax(0, 1fr));
                }
            }
 @media (max-width: 330px) {

                #tarjetas {
                    grid-template-columns: repeat(1, minmax(0, 1fr));
                }
 }
            @media (max-width: 340px) {

      

                .filtros {
    column-gap: 7px;
                    margin-left: 15px;
                    margin-right: 15px;
            }}

            @media (max-width: 365px) {

                .checkmark {
                    color: white !important;
                    position: absolute;
                    right: 7px;
                    top: 3px; /* esto alinea arriba */
                    font-weight: bold;
                    font-size: 1em;
                    user-select: none;
                }
            }

            @media (min-width: 1150px) {
                .logo {
                    width: 220px !important;
                    left: 65px;
                }
                
                    .menu {
                    top: 50%;
                    right: 25px;
                    transform: translateY(60%);
                }

                    .menu a {
                        margin: 0 25px;
                        padding: 6px 15px;
                        font-size: 1rem;
                    }

                .frase-text {
                    font-size: 0.7rem;
                }

                    .frase-text h1 {
                        font-size: 1rem;
                    }

                #tarjetas {
                    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)) !important;
                    margin-left: 16px;
    margin-right: 16px;
                }

                .banner-espejo {
                    width: 30vw;
                }
            }
            /* Para pantallas de 1200px o más */
            @media (min-width: 1200px) {
                .logo {
                    width: 220px !important;
                    left: 65px;
                }


                .menu {
                    top: 50%;
                    right: 25px;
                    transform: translateY(50%);
                }

                    .menu a {
                        margin: 0 25px;
                        padding: 6px 15px;
                        font-size: 1rem;
                    }

                .frase-text {
                    font-size: 0.7rem;
                }

                    .frase-text h1 {
                        font-size: 1rem;
                    }

                #tarjetas {
                    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                }

                .banner-espejo {
                    width: 27vw;
                }

                .menu-container {
                    top: 3px;
                }
            }

            @media (min-width: 1464px) {
                #tarjetas {
                    grid-template-columns: repeat(auto-fill, minmax(330px, 1fr)) !important;
                }
            }

            @media (min-width: 1725px) {
                #tarjetas {
                    grid-template-columns: repeat(auto-fill, minmax(390px, 1fr)) !important;
                }
            }

            @media (max-width: 600px) {
                #bannerComparar {
                    padding: 10px;
                    flex-direction: column;
                    align-items: center;
                }

                #btnComparar,
                #btnLimpiarComparar {
                    width: 50%;
                }
            }
        

            @media (max-width: 1090px) {

                #btnComparar,
                #btnLimpiarComparar {
                    width: 50%;
                    height: 50%;
                }
            }

            @media (max-width: 1150px) {
                /* ================================
     ANULACIÓN TOTAL DEL TRANSFORM EN PANEL 2
     ================================ */
                .gif-container.open-panel2 .panel2,
                .gif-container.open-panel1 .panel2 {
                    opacity: 1 !important;
                    pointer-events: auto !important;
                    /* Aquí eliminamos TODO transform anterior */
                    transform: none !important;
                    /* Ajusta top/right/left a tu gusto */
                    top: 240px; /* Lo coloca debajo del panel 1 */
                    left: auto;
                    right: 34px; /* Alineado a la izquierda */
                    width: 187px; /* Ancho completo */
                    margin-top: 10px;
                }
                /* Y si quieres asegurarte de que tampoco haya transición de X, quita cualquier transition que no quieras: */
                .gif-container.open-panel2 .panel2,
                .gif-container.closing-panel2 .panel2 {
                    transition: none !important;
                }

                .panel2 {
                    transform: none !important;
                    transition: none !important;
                }
            }

            @media (max-width: 480px) {
                .logo {
                    width: 170px !important;
                    top: 36%;
                    left: 100px;
                }

                .tooltip-miniatura img {
                    display: block;
                    width: 80px !important;
                    height: 60px !important;
                }

                .tooltip-miniatura {
                    min-width: 80px !important;
                    max-width: 80px !important;
                }

                .gif-container .menu-container {
                    top: 15px !important;
                    right: 20px !important;
                }

                .gif-container img:not(.logo), .gif-container img:first-child {
                    height: 60px;
                }

                .fixed-header .logo {
                    width: 170px !important;
                    top: 57%;
                    left: 100px !important;
                }

                .fixed-header .menu-container {
                    top: 15px !important;
                    right: 20px !important;
                }

                .fixed-header {
                    height: 60px;
                }

                #btnLimpiarComparar {
                    padding: 7px 10px;
                }

                #btnComparar {
                    padding: 7px 10px;
                }

                #bannerComparar {
                    padding-top: 5px;
                    padding-bottom: 5px;
                }
            }
        /* Sección */
        .aliados-section {
            background: #0b0b0b;
            color: #c9a86a;
            padding: 24px 16px 0px;
        }

        /* GRID: + 1 fila para el título arriba */
        .aliados-grid-desktop {
            display: grid;
            grid-template-columns: repeat(3, minmax(0,1fr));
            grid-template-rows: minmax(64px, auto) repeat(4, minmax(140px, 1fr)); /* Fila 1 = título */
            gap: 0;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Celdas base */
        .cell {
            position: relative;
            display: grid;
            place-items: center;
            overflow: hidden;
            min-height: 180px;
            height: 100%;
            border: 2px solid transparent; /* evita “salto” al hover */
            box-sizing: border-box;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

            .cell img {
                width: 100%;
                height: 100%;
                object-fit: contain;
            }

        /* Celda de TÍTULO dentro de la grilla */
        #cell-title {
            grid-column: 1 / -1; /* ocupa 3 columnas */
            grid-row: 1 / 2; /* fila 1 */
            background: #000;
            min-height: 64px; /* anula los 180px de .cell */
            height: 100%;
            padding: 10px 12px;
            border: 2px solid transparent; /* no sobresale */
        }

            #cell-title .title-text {
                font-family: 'Outfit', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
                font-weight: 500; /* solicitado */
                text-transform: uppercase;
                letter-spacing: .10em;
                color: #c9a86a;
                font-size: 18px;
                line-height: 1.2;
            }

        /* Imágenes grandes (celdas decorativas) */
        .cell.is-image img {
            object-fit: cover;
        }

        /* Fondos tipo ajedrez */
        .bg-black {
            background: #000;
        }

        .bg-gray {
            background: #131313;
        }

        /* Ubicaciones exactas (+1 fila por el título) */
        #cell-img1 {
            grid-column: 1 / 2;
            grid-row: 2 / span 2;
        }
        /* Ciudad sup-izq (2 filas) */
        #cell-slot1 {
            grid-column: 2 / 3;
            grid-row: 2 / 3;
        }
        /* La Primavera */
        #cell-jovel {
            grid-column: 3 / 4;
            grid-row: 2 / span 2;
        }
        /* Jovel (2 filas, foto + overlay) */

        #cell-slot2 {
            grid-column: 2 / 3;
            grid-row: 3 / 4;
        }

        #cell-slot3 {
            grid-column: 2 / 3;
            grid-row: 4 / 5;
        }

        #cell-slot4 {
            grid-column: 2 / 3;
            grid-row: 5 / 6;
        }

        #cell-slot5 {
            grid-column: 1 / 2;
            grid-row: 4 / 5;
        }

        #cell-slot6 {
            grid-column: 1 / 2;
            grid-row: 5 / 6;
        }

        #cell-img2 {
            grid-column: 3 / 4;
            grid-row: 4 / span 2;
        }
        /* Cactus inf-der (2 filas) */

        /* Link/logo dentro de cada celda */
        .cell a {
            display: grid;
            place-items: center;
            width: 100%;
            height: 100%;
            text-decoration: none;
        }

            .cell a img {
                max-width: 72%;
                max-height: 72%;
            }

        /* Hover (solo en desktop) */
        @media (hover:hover) and (pointer:fine) {
            /* Hover dorado SOLO en celdas de logo (no título, no imágenes grandes) */
            .cell:not(.is-image):not(#cell-title):hover {
                background-color: #be8939 !important;
                border-color: #be8939;
            }

            /* Neutraliza cualquier escala sobre imágenes en hover */
            .aliados-section .cell a img {
                transition: opacity 160ms ease;
            }

            .aliados-section .cell a:hover img {
                transform: none !important;
            }

            /* Accesibilidad foco en links (si lo quieres mantener) */
            .cell a:focus-visible {
                outline: 2px solid #c9a86a;
                outline-offset: -6px;
            }
        }

        /* Jovel con imagen de fondo + overlay dorado propio */
        .jovel-cell {
            background: #111; /* fallback */
            position: relative;
        }

            .jovel-cell::before {
                content: "";
                position: absolute;
                inset: 0;
                background-image: var(--jovel-bg);
                background-size: cover;
                background-position: center;
                z-index: 0; /* fondo base */
            }

            .jovel-cell::after {
                content: "";
                position: absolute;
                inset: 0;
                background: rgba(190, 137, 57, 0.75); /* dorado con transparencia */
                z-index: 1; /* sobre la foto */
            }
            /* Logo negro por encima del overlay */
            .jovel-cell .jovel-logo {
                position: relative;
                z-index: 2; /* sobre el overlay */
                width: 72%;
                height: auto;
                object-fit: contain;
            }

        /* Fade para la rotación */
        .fade-enter {
            opacity: 0;
        }

            .fade-enter.fade-active {
                opacity: 1;
                transition: opacity 280ms ease;
            }

        /* Desactivar interacción (si son decorativas) */
        #cell-img1, #cell-img2 {
            pointer-events: none;
        }

        /* Oculta esta versión en móviles (luego montamos la mobile) */
        @media (max-width: 1023.98px) {
            .aliados--desktop {
                display: none;
            }
        }

        /* === Full-bleed / de borde a borde === */
        .aliados-section {
            padding-left: 280PX; /* quita padding lateral de la sección */
            padding-right: 280PX;
        }

        /* Opción A: ocupar 100% del contenedor */
        .aliados-grid-desktop {
            max-width: none; /* elimina el tope de 1200px */
            margin: 0; /* sin auto-centro */
            width: 100%;
        }

        /* ==== Animación de entrada (zoom-in notoria, con “pop”) ==== */
        .reveal {
            opacity: 0;
            transform: scale(0.85);
            will-change: opacity, transform;
        }

            .reveal.is-revealed {
                animation: zoomInPop 560ms cubic-bezier(.16,.84,.44,1) both;
            }

        @keyframes zoomInPop {
            0% {
                opacity: 0;
                transform: scale(0.85);
            }

            70% {
                opacity: 1;
                transform: scale(1.03);
            }
            /* overshoot suave */
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Respeta reduce-motion del usuario */
        @media (prefers-reduced-motion: reduce) {
            .reveal {
                opacity: 1 !important;
                transform: none !important;
            }

                .reveal.is-revealed {
                    animation: none !important;
                }
        }
        /* Solo mostrar en móvil */
        .aliados--mobile {
            display: block;
        }

        @media (min-width:1024px) {
            .aliados--mobile {
                display: none;
            }
        }

        /* Contenedor móvil (2 columnas x 4 filas + fila de título) */
        #aliados-m {
            padding: 0; /* full-bleed */
        }

        #aliados-m {
            --gold: #be8939;
            --text: #0b0b0b;
        }

        #aliados-m {
            display: grid;
            grid-template-columns: repeat(2, minmax(0,1fr));
            grid-template-rows: /* fila 1: título  */ minmax(56px,auto)
            /* filas 2..5 */ repeat(4, minmax(120px, 1fr));
            gap: 0;
            width: 100%;
        }

        /* Celdas base (prefijo mcell para NO tocar escritorio) */
        .mcell {
            position: relative;
            display: grid;
            place-items: center;
            overflow: hidden;
            min-height: 140px;
            background: #000; /* por defecto negro */
        }

            .mcell img {
                width: 100%;
                height: 100%;
                object-fit: contain;
                max-width: 78%;
                max-height: 78%;
            }

        /* Fila de TÍTULO con img2 de fondo y overlay dorado */
        #m-title {
            grid-column: 1 / -1;
            grid-row: 1 / 2;
            min-height: 56px;
            background: linear-gradient(rgba(190,137,57,.88), rgba(190,137,57,.88)), var(--img2) center/cover no-repeat;
        }

            #m-title .m-title-text {
                font-family: 'Outfit', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
                font-weight: 500;
                text-transform: uppercase;
                letter-spacing: .08em;
                color: #0b0b0b; /* texto oscuro sobre dorado */
                font-size: 18px;
            }

        /* IMG1 ocupa dos filas (r2..r3) y 1 columna (izq) */
        #m-img1 {
            grid-column: 1 / 2;
            grid-row: 2 / span 2; /* r2 y r3 */
        }

            #m-img1 img {
                object-fit: cover;
            }

        /* Posiciones fijas de las 6 casillas de aliados (derecha r2,r3 y toda la fila r4,r5) */
        #m-slot1 {
            grid-column: 2 / 3;
            grid-row: 2 / 3;
        }

        #m-slot2 {
            grid-column: 2 / 3;
            grid-row: 3 / 4;
        }
        /* este será el rotatorio que se moverá “al azar” */
        #m-slot3 {
            grid-column: 1 / 2;
            grid-row: 4 / 5;
        }

        #m-slot4 {
            grid-column: 2 / 3;
            grid-row: 4 / 5;
        }

        #m-slot5 {
            grid-column: 1 / 2;
            grid-row: 5 / 6;
        }

        #m-slot6 {
            grid-column: 2 / 3;
            grid-row: 5 / 6;
        }

        /* Paleta tipo “ajedrez” */
        .mcell.bg-black {
            background: #000;
        }

        .mcell.bg-gray {
            background: #131313;
        }

        /* Accesibilidad: imágenes decorativas sin interacción */
        #m-img1 {
            pointer-events: none;
        }

        /* Animación de entrada (opcional; mismo estilo que desktop pero más sutil en móvil) */
        .reveal-m {
            opacity: 0;
            transform: scale(.9);
        }

            .reveal-m.is-revealed {
                animation: zoomInPopM 520ms cubic-bezier(.16,.84,.44,1) both;
            }

        @keyframes zoomInPopM {
            0% {
                opacity: 0;
                transform: scale(.9);
            }

            70% {
                opacity: 1;
                transform: scale(1.03);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            .reveal-m {
                opacity: 1 !important;
                transform: none !important;
            }

                .reveal-m.is-revealed {
                    animation: none !important;
                }
        }

        /* Centrado perfecto de logos dentro de las celdas móviles */
        .mcell a {
            display: grid;
            place-items: center;
            width: 100%;
            height: 100%;
        }

            .mcell a img {
                display: block; /* quita la línea base */
                max-width: 84%; /* ajusta aquí el tamaño global del logo */
                max-height: 84%;
                object-fit: contain;
                object-position: center;
            }

        /* La imagen grande (m-img1) debe llenar su casilla al 100% */
        #m-img1 img,
        .m-image img {
            width: 100% !important;
            height: 100% !important;
            max-width: none !important;
            max-height: none !important;
            object-fit: cover;
            object-position: center;
        }

        /* Si algún logo sigue “torcido” por bordes transparentes del PNG,
   puedes afinar por casilla: */
        #m-slot1 a img {
            max-width: 86%;
            max-height: 86%;
        }
        /* ejemplo */
        #m-slot3 a img {
            max-width: 80%;
        }
        /* ejemplo */

        /* Jovel (m-slot5) y la celda m-slot6 más pequeños */
        @media (max-width: 1023.98px) {
            /* Jovel */
            #m-slot5 a img {
                max-width: 68% !important;
                max-height: 68% !important;
                object-position: center;
            }
            /* Slot 6 */
            #m-slot6 a img {
                max-width: 64% !important;
                max-height: 64% !important;
                object-position: center;
            }
        }

        /* (Opcional) aún más pequeños en pantallas angostas */
        @media (max-width: 380px) {
            #m-slot5 a img {
                max-width: 64% !important;
                max-height: 64% !important;
            }

            #m-slot6 a img {
                max-width: 70% !important;
                max-height: 70% !important;
            }
        }

        /* Normaliza TODOS los logos (no imágenes de fondo) */
        #aliados-m .mcell a img {
            width: auto !important;
            height: auto !important;
            max-width: 84% !important;
            max-height: 84% !important;
            object-fit: contain;
            object-position: center;
        }

        /* La imagen grande SÍ ocupa todo (no es logo) */
        #aliados-m .m-image img,
        #aliados-m #m-img1 img {
            width: 100% !important;
            height: 100% !important;
            max-width: none !important;
            max-height: none !important;
            object-fit: cover;
        }

        /* Ajustes especiales: Jovel (m-slot5) y m-slot6 más pequeños */
        #aliados-m #m-slot5 a img {
            max-width: 68% !important;
            max-height: 68% !important;
        }

        #aliados-m #m-slot6 a img {
            max-width: 74% !important;
            max-height: 74% !important;
        }
        /* --- Fix solo con CSS: Jovel siempre visible y con su tamaño --- */
        @media (max-width: 1023.98px) {
            /* 1) Anula la animación/ocultamiento de reveal para m-slot5 */
            #aliados-m #m-slot5.reveal-m,
            #aliados-m #m-slot5.reveal-m.is-revealed {
                opacity: 1 !important;
                transform: none !important;
                animation: none !important;
            }

            /* 2) Asegura que el ancla ocupe toda la celda y centre el logo */
            #aliados-m #m-slot5 a {
                display: grid !important;
                place-items: center !important;
                width: 100% !important;
                height: 100% !important;
            }

                /* 3) Tamaño fijo de Jovel (por si el DOM se remonta al rotar) */
                #aliados-m #m-slot5 a img {
                    display: block !important;
                    width: auto !important;
                    height: auto !important;
                    max-width: 68% !important; /* tu tamaño reducido */
                    max-height: 68% !important;
                    object-fit: contain !important;
                    object-position: center !important;
                }
        }

        /* (Opcional) Si también viste esto en m-slot6, aplica el mismo fix: */
        @media (max-width: 1023.98px) {
            #aliados-m #m-slot6.reveal-m,
            #aliados-m #m-slot6.reveal-m.is-revealed {
                opacity: 1 !important;
                transform: none !important;
                animation: none !important;
            }
        }
        /* Hover dorado en móvil (solo donde hay hover real) */
        @media (hover:hover) and (pointer:fine) {
            /* evita “saltos” y anima suave */
            #aliados-m .mcell {
                border: 2px solid transparent;
                box-sizing: border-box;
                transition: background-color 240ms ease, border-color 240ms ease;
            }

                /* aplica el hover dorado solo a celdas de LOGO
     (no al título ni a la imagen grande) */
                #aliados-m .mcell:not(#m-title):not(.m-image):hover {
                    background-color: #be8939 !important;
                    border-color: #be8939 !important;
                }

                /* foco accesible en los links dentro de las celdas */
                #aliados-m .mcell a:focus-visible {
                    outline: 2px solid #be8939;
                    outline-offset: -6px;
                }
        }

        /* Banner móvil con fondo img2 controlable por variables */
        #m-title {
            grid-column: 1 / -1;
            grid-row: 1 / 2;
            min-height: 36px;
            /* Capa 1: overlay dorado | Capa 2: imagen */
            background-image: linear-gradient(rgba(190,137,57,.88), rgba(190,137,57,.88)), var(--img2);
            /* No repetir ninguna capa */
            background-repeat: no-repeat, no-repeat;
            /* Tamaño por capa: el gradiente se ajusta solo; la imagen usa --img2-size */
            background-size: auto, var(--img2-size, cover);
            /* Posición por capa: el gradiente centrado; la imagen usa --img2-pos */
            background-position: center, var(--img2-pos, 20% 80%);
        }

        /* Estado base (desktop visible, mobile oculta) */
        .aliados--desktop {
            display: block;
        }

        

        /* Mobile <= 1023.98px: muestra mobile y oculta desktop */
        @media (max-width: 1023.98px) {
            .aliados--desktop {
                display: none !important;
            }


            /* asegura la grilla */
        }

        /* Desktop >= 1024px: refuerza visibilidad desktop y oculta mobile */
        @media (min-width: 1024px) {
            

            .aliados--mobile, #aliados-m {
                display: none !important;
            }
        }
 @media (max-width: 800px) {
     #tarjetas {
         margin-left: 0px;
         margin-right: 0px;
 }
    </style>



</head>

<body>
    <!-- Banner principal -->


    <header class="header">
        <!-- GIF de fondo -->
        <div class="gif-container">
            <img src="https://i.imgur.com/BY9xTB8.gif" alt="Banner animado" />
            <div class="banner-espejo"></div>
            <a href="https://icdeinmobiliaria.com">
                <img src="https://i.imgur.com/XgfIulc.png" alt="Logo" class="logo" />
            </a>
            <!-- Nuevo contenedor para el menú desplegable -->
            <div class="menu-container">
                <div class="menu-icon">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
                <nav class="menu">
                    <a href="#" class="toggle-services">Servicios ▾</a>
                    <div class="services-panel panel1">
                        <div class="salir-servicios2" title="Cerrar">×</div>
                        <p>¿Quieres vender?</p>
                        <p>¿Buscas invertir?</p>
                        <p>Administramos tu propiedad</p>
                    </div>
                    <div class="services-panel panel2">
                        <div class="salir-servicios" title="Cerrar">×</div>
                        <p>Diseños arquitectónicos</p>
                        <p>Avalúos certificados</p>
                        <p>Estudio de títulos</p>
                    </div>
                    <a href="mapa.html" class="btn-mapa">Inventario por barrios</a>
                    <a href="https://icde.my.canva.site/quienes-somos" target="_blank">Quiénes somos</a>
                    <a href="https://wa.me/573208762117?text=Hola,%20necesito%20más%20información" target="_blank">Contáctanos</a>
                </nav>
            </div>
        </div>
        <div id="header-sentinel"></div>
        <!-- Banner fijo AL SCROLLEAR (oculto por defecto) -->
        <div class="fixed-header">
            <a href="https://icdeinmobiliaria.com">
                <img src="https://i.imgur.com/XgfIulc.png" alt="Logo" class="logo" />
            </a>
            <div class="menu-container">
                <div class="menu-icon">
                    <div></div><div></div><div></div>
                </div>
                <nav class="menu">
                    <a href="#" class="toggle-services">Servicios ▾</a>
                    <div class="services-panel panel1">
                        <div class="salir-servicios2" title="Cerrar">×</div>
                        <p>¿Quieres vender?</p>
                        <p>¿Buscas invertir?</p>
                        <p>Administramos tu propiedad</p>
                    </div>
                    <div class="services-panel panel2">
                        <div class="salir-servicios" title="Cerrar">×</div>
                        <p>Diseños arquitectónicos</p>
                        <p>Avalúos certificados</p>
                        <p>Estudio de títulos</p>
                    </div>
                    <a href="mapa.html" class="btn-mapa">Inventario por barrios</a>
                    <a href="https://icde.my.canva.site/quienes-somos" target="_blank">Quiénes somos</a>
                    <a href="https://wa.me/573208762117?text=Hola,%20necesito%20más%20información" target="_blank">Contáctanos</a>
                </nav>
            </div>
        </div>

        <div class="divider-shadow"></div>






    </header>

    <div class="bg">
        <img src="https://i.imgur.com/gIiniTy.jpeg" alt="fondo" />
    </div>
    <!-- Frase central -->
    <div class="frase-container">
        <div class="frase-text">
            <h1>Reunimos la mayor variedad de propiedades en el Huila. Elige tus preferencias y descubre la casa de tus sueños.</h1>
            <h1></h1>
        </div>
    </div>


    <div class="contenedor-principal">
        <div class="filtros hidden">
            <select id="filterTipoPropiedad" class="flecha" multiple><option value="" disabled hidden>Tipo de inmueble</option></select>
            <select id="filterRangoPrecio" class="flecha" multiple><option value="" disabled hidden>Precio</option></select>
            <select id="filterZona" class="flecha" multiple><option value="" disabled hidden>Zona </option></select>
            <select id="filterEstrato" multiple><option value="" disabled hidden>Estrato </option></select>
            <select id="filterBarrio" class="flecha" multiple><option value="">Barrio </option></select>
            <select id="filterConjunto" class="flecha" multiple><option value="">Conjunto </option></select>
            <select id="filterHabitaciones" class="flecha" multiple><option value="" disabled hidden>Habitaciones </option></select>
            <select id="filterGaraje" class="flecha" multiple><option value="" disabled hidden>Garaje </option></select>
            <select id="filterPisos" class="flecha" multiple><option value="" disabled hidden>Pisos </option></select>
            <input type="search" id="filterBuscar" placeholder="Buscar..." />
            <button id="clearFilters" class="btn-limpiar hidden">Limpiar filtros</button>
        </div>

        <div class="contador-wrapper" style="display: flex;justify-content: space-between;align-items: center;padding-top: 6px;padding-bottom: 6px;">
            <div id="contador" class="contador hidden">
                0 de 0
            </div>
            <!-- Nuevo control “Ordenar por” -->
            <div id="ordenar-por" class="ordenar-por hidden">


                <div id="sortToggle" class="sort-toggle">
                    Ordenar por ▾
                </div>
                <ul id="sortOptions" class="sort-options hidden">
                    <li data-value="menorPrecio">Menor precio</li>
                    <li data-value="mayorPrecio">Mayor precio</li>
                    <li data-value="rentabilidad">Mayor rentabilidad</li>
                </ul>
            </div>
        </div>
        <div id="spinner" class="spinner-container">
            <img src="https://i.imgur.com/oQ3uUgP.png" alt="Logo dorado" class="logocarga" />
            <div class="shine"></div>
            <span class="loading-text">Cargando propiedades...</span>
        </div>
        <a href="https://wa.me/573208762117?text=Hola,%20necesito%20más%20información"
           class="whatsapp-float"
           target="_blank"
           aria-label="WhatsApp">
            <img src="https://i.imgur.com/xMZuIcG.png" alt="WhatsApp" />
        </a>
        <div id="tarjetas"></div>
        <div id="paginacion" class="paginacion"></div>

        <!-- Modal -->
        <div id="modalOverlay" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle" tabindex="-1" style="display:none;">
            <div class="modal">
                <button class="modal-close" aria-label="Cerrar modal">&times;</button>
                <div class="modal-contenido">
                    <div class="modal-columna-izq">
                        <img id="modalImagen" class="modal-imagen" src="" alt="Imagen inmueble" />
                        <a id="modalLinkFotos" href="#" target="_blank" class="boton-fotos">Ver más fotos</a>
                        <div class="modal-bloque-info">
                            <h2 id="modalTitle" style="margin-top:5px; margin-bottom:5px;"></h2>
                            <p class="tipo" id="modalTipo"></p>
                            <p class="modalCodigo"><strong>Código:</strong> <span id="modalCodigo"></span></p>
                            <p id="modalPrecio" class="precio"></p>
                            <div class="modal-etiquetas" id="modalEtiquetas"></div>
                        </div>
                    </div>
                    <div class="modal-columna-der">
                        <div class="modal-subtitulo">CARACTERÍSTICAS DETALLADAS</div>
                        <table class="modal-tabla-caracteristicas" id="modalTablaCaracteristicas">
                            <!-- Filas se insertan con JS -->
                        </table>
                        <h3 class="modal-subtitulo">PUNTOS CLAVES:</h3>
                        <p id="modalPuntosClave" class="modal-texto"></p>
                    </div>
                </div>
                <h3 class="modal-subtitulo">DESCRIPCIÓN</h3>
                <p id="modalDescripcion" class="modal-texto"></p>
                <div style="text-align: center; margin-top: 20px;">
                    <a id="modalBotonWhatsapp"
                       href="#"
                       target="_blank"
                       style="background-color: #be8939; color: white; padding: 12px 20px; border-radius: 5px; text-decoration: none; display: inline-block; font-weight: bold;">
                        ✆ Agendar visita por WhatsApp
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- NUEVO: Banner inferior de comparación -->
    <div id="bannerComparar" class="banner-comparar hidden">
        <!-- Miniaturas a la izquierda -->
        <div id="miniaturasComparar" class="miniaturas-comparar flex-shrink-0"></div>

        <!-- Texto centrado -->
        <div class="flex-1 text-center">
            <span id="textoComparar" class="block">Has seleccionado 0 propiedades</span>
        </div>

        <!-- Botones a la derecha -->
        <div class="botonescontainer">
            <button id="btnComparar" class="btn-comparar flex-1">Comparar</button>
            <button id="btnLimpiarComparar" class="btn-limpiare flex-1">Limpiar</button>
        </div>
    </div>

    <!-- NUEVO: Modal de comparación -->
    <div id="modalComparacion" class="modal-comparacion hidden" role="dialog" aria-modal="true" style="z-index: 1001;">
        <button class="modal-close-comparar" aria-label="Cerrar comparación">&times;</button>
        <div class="contenedor-comparacion">
            <!-- Aquí se agregan las dos propiedades con JS -->
        </div>
    </div>

    <!-- Alerta flotante para comparación -->
    <div id="alerta-comparacion" class="fixed bottom-4 right-4 bg-red-600 text-white px-4 py-3 rounded-lg shadow-lg text-sm hidden z-50 transition-all duration-300">
        Solo puedes comparar 2 propiedades a la vez.
    </div>
    <section id="aliados" class="aliados-section aliados--desktop">


        <div id="aliados-grid-desktop" class="aliados-grid-desktop hidden">
            <!-- NUEVA fila 1: TÍTULO a lo ancho -->
            <div id="cell-title" class="cell title-cell">
                <span class="title-text">EN ALIANZA CON:</span>
            </div>
            <!-- Imagen grande (2 filas) — CIUDAD (arriba-izquierda) -->
            <div id="cell-img1" class="cell is-image">
                <img src="https://i.imgur.com/RVNbM2T.png" alt="Imagen alianza 1 (ciudad)" />
            </div>

            <!-- La Primavera - NEGRO -->
            <div id="cell-slot1" class="cell bg-black">
                <a href="https://www.solucioneslaprimavera.com/" target="_blank" rel="noopener">
                    <img src="https://i.imgur.com/3OZU62r.png" alt="Soluciones La Primavera" loading="lazy" decoding="async">
                </a>
            </div>

            <!-- Jovel (2 filas) con fondo + overlay dorado + logo negro -->
            <div id="cell-jovel"
                 class="cell jovel-cell"
                 style="--jovel-bg: url('https://i.imgur.com/jUF3SuM.png');">
                <a href="https://www.inmobiliariajovelmunoz.com.co/" target="_blank" rel="noopener" aria-label="Inmobiliaria Jovel Muñoz">
                    <img class="jovel-logo" src="https://i.imgur.com/OqVH7o4.png" alt="Inmobiliaria Jovel Muñoz" loading="lazy" decoding="async">
                </a>
            </div>

            <!-- Asuntos Inmobiliarios - negro -->
            <div id="cell-slot2" class="cell bg-gray">
                <a href="https://inmobiliariasantamariavera.com/" target="_blank" rel="noopener">
                    <img src="https://i.imgur.com/JoMeVmg.png" data-logonegro="https://i.imgur.com/p5cVes5.png" alt="Inmobiliaria Santa María Vera" loading="lazy" decoding="async">
                </a>
            </div>

            <!-- Rocha -->
            <div id="cell-slot3" class="cell bg-black">
                <a href="https://www.rochafincaraiz.com" target="_blank" rel="noopener">
                    <img src="https://i.imgur.com/6g9dE1m.png" data-logonegro="https://i.imgur.com/NIh6RSO.png" alt="Rocha" loading="lazy" decoding="async">
                </a>
            </div>

            <!-- JP inmobiliaria -->
            <div id="cell-slot4" class="cell bg-gray">
                <a href="https://www.inmobiliariajpescobar.com.co/" target="_blank" rel="noopener">
                    <img src="https://i.imgur.com/qplz1JN.png" data-logonegro="https://i.imgur.com/wCVwW3q.png" alt="JP" loading="lazy" decoding="async">
                </a>
            </div>

            <!-- Casa Honor - GRIS -->
            <div id="cell-slot5" class="cell bg-gray">
                <a href="https://casahonorinmobiliaria.com/" target="_blank" rel="noopener">
                    <img src="https://i.imgur.com/QC7bWHR.png" data-logonegro="https://i.imgur.com/RlRINvm.png" alt="Casa Honor Inmobiliaria" loading="lazy" decoding="async">
                </a>
            </div>

            <!-- Slot rotación / Asuntos Inmobiliarios - NEGRO -->
            <div id="cell-slot6" class="cell bg-black">
                <a href="https://aliado.com" target="_blank" rel="noopener">
                    <img src="https://i.imgur.com/gaR7Xq0.png" data-logonegro="https://i.imgur.com/fkgcSSK.png" alt="Asuntos Inmobiliarios" loading="lazy" decoding="async">
                </a>
            </div>

            <!-- Imagen grande (2 filas) — CACTUS (abajo-derecha) -->
            <div id="cell-img2" class="cell is-image">
                <img src="https://i.imgur.com/f6vW73M.png" alt="Imagen alianza 2 (cactus)" />
            </div>
        </div>
    </section>

    <link rel="stylesheet" href="aliados-desktop.css">
    <script src="aliados-desktop.js" defer></script>
    <!-- Versión MÓVIL -->
    <section id="aliados-m" class="aliados-section aliados--mobile hidden">
        <div id="m-title"
             class="mcell m-title"
             style="--img2:url('https://i.imgur.com/f6vW73M.png')">
            <span class="m-title-text">EN ALIANZA CON:</span>
        </div>

        <!-- IMG1 ocupa 2 filas (izquierda) -->
        <div id="m-img1" class="mcell m-image" aria-hidden="true">
            <img src="https://i.imgur.com/RVNbM2T.png" alt="">
        </div>

        <!-- 6 casillas de aliados -->
        <div id="m-slot1" class="mcell"></div>
        <div id="m-slot2" class="mcell"></div>
        <div id="m-slot3" class="mcell"></div>
        <div id="m-slot4" class="mcell"></div>
        <div id="m-slot5" class="mcell"></div>
        <div id="m-slot6" class="mcell"></div>
    </section>
    <footer>
        <div class="PiePagina-container">
            <h2 class="PiePagina-titulo">ICDE – NEGOCIOS INMOBILIARIOS</h2>
            <div class="PiePagina-grid">

                <!-- Columna izquierda: Título y imagen decorativa -->
                <div class="PiePagina-col text-center">

                    <img src="https://i.imgur.com/avRgxTP.jpeg" alt="Decoración oficina" class="PiePagina-img">
                </div>
                <!-- Columna derecha -->
                <div class="PiePagina-col derecha">


                    <!-- Contacto -->
                    <div>
                        <h3 class="PiePagina-heading">CONTÁCTANOS</h3>
                        <p>Calle 32 #6-67, barrio Las Granjas<br>Neiva, Huila</p>

                        <p class="mt-2">(320) 876-2117</p>
                        <p class="mt-2">icdesaladenegocios@gmail.com</p>
                    </div>

                    <!-- Horarios -->
                    <div>
                        <h3 class="PiePagina-heading">HORARIO DE ATENCIÓN</h3>
                        <p>Lunes a Viernes: 9:00 am – 6:00 pm</p>
                        <p class="mt-2">Sábado: 9:00 am – 12:00 pm</p>
                    </div>
                </div>
            </div>
        </div>


        <div class="PiePagina-mapa">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3984.544382602311!2d-75.29109089999994!3d2.9462962999999984!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e3b7459b0e3c6bf%3A0xd6aa531afbfd1a1d!2sCl.%2032%20%236%20-%2067%2C%20Comuna%202%2C%20Neiva%2C%20Huila!5e0!3m2!1ses!2sco!4v1748238716495!5m2!1ses!2sco" width=100% height=100% style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>

        </div>



        <!-- Redes sociales -->


        <div>

            <div class="PiePagina-socials">
                <a href="https://www.facebook.com/share/15VK3AyXLC/" target="_blank" aria-label="Facebook">
                    <img src="https://i.imgur.com/7TywClm.png" alt="Facebook">
                </a>
                <a href="https://www.instagram.com/icde_agencia_inmobiliaria?igsh=NjRvZmZtN2FrYzln" target="_blank" aria-label="Instagram">
                    <img src="https://i.imgur.com/eQGkD74.png" alt="Instagram">
                </a>
                <a href="https://wa.me/573208762117?text=Hola,%20necesito%20m%C3%A1s%20informaci%C3%B3n" target="_blank" aria-label="WhatsApp">
                    <img src="https://i.imgur.com/MA961il.png" alt="WhatsApp">
                </a>
            </div>
        </div>


    </footer>

    <script>
        // ─────────────────────────────────────────────────
        // 1. Variables globales y configuración inicial
        // ─────────────────────────────────────────────────
        const API_URL = "https://script.google.com/macros/s/AKfycbyBb5UOS0LIbjJ4yAc3xPH6PGJohWx5RhN-Z0Xl1B7kZs9vTKDpi0TJH9viYNCuh4oE/exec";

        let paginaActual = 1;
        const tarjetasPorPagina = 12;
        let datos = [];

        let filtros = {
            "Tipo de inmueble": [],
            "Rango de precio": [],
            "Zona": [],
            "Estrato": [],
            "Barrio": [],
            "Conjunto": [],
            "Habitaciones": [],
            "Garaje": [],
            "Pisos": [],
            "Buscar": ""
        };

        let listaFiltrada = [];
        let todosBarrios = [];
        let todosConjuntos = [];
        const choiceInstances = {};
        let primeraCarga = true; // Para controlar el primer renderizado de tarjetas
        let criterioOrden = "";  // "" | "menorPrecio" | "mayorPrecio" | "rentabilidad"

        // ─────────────────────────────────────────────────
        // 2. Función para cargar datos desde tu API
        // ─────────────────────────────────────────────────
        function cargarDatos() {
            const spinner = document.getElementById("spinner");
            if (spinner) spinner.style.display = "block";


            fetch(API_URL)
                .then(res => res.json())
                .then(inicializar)
                .catch(err => {
                    console.error("Error al leer datos:", err);

                    if (spinner) spinner.style.display = "none";
                });
        }

        // ─────────────────────────────────────────────────
        // 3. Función de inicialización (después de obtener 'data')
        // ─────────────────────────────────────────────────
        function inicializar(data) {
            datos = data;

            // Asegurarnos de que ciertos filtros sean arrays
            filtros["Zona"] = filtros["Zona"] || [];
            filtros["Barrio"] = filtros["Barrio"] || [];
            filtros["Conjunto"] = filtros["Conjunto"] || [];

            // 3.1. Poblar los <select> iniciales con TODOS los registros (llenarOpcionesFiltros)
            llenarOpcionesFiltros();

            // 3.2. Guardar listas completas de barrios y conjuntos para dependencia
            todosBarrios = [...new Set(
                datos
                    .map(d => d["Barrio"])
                    .filter(v => v && v.trim() !== "")
            )].sort();
            todosConjuntos = [...new Set(
                datos
                    .map(d => d["Conjunto"])
                    .filter(v => v && v.trim() !== "")
            )].sort();

            // 3.3. Inicializar Choices en cada <select multiple …>
            const selects = document.querySelectorAll('.filtros select[multiple]');



            selects.forEach(select => {
                const tieneBuscador = ["filterBarrio", "filterConjunto"].includes(select.id);

                const instancia = new Choices(select, {
                    placeholder: true,
                    placeholderValue: select.options[0].text,
                    removeItemButton: true,

                    // → activamos el filtrado sólo donde queremos buscador
                    searchEnabled: true,
                    searchChoices: true,


                    shouldSort: false,
                    allowHTML: true,


                });


                const inputClonado = instancia.containerOuter.element.querySelector('.choices__input--cloned');
                if (inputClonado) {
                    inputClonado.readOnly = true;   // no editable
                    inputClonado.tabIndex = -1;      // no se puede enfocar
                    // opcional: ocultarlo totalmente
                    // inputClonado.style.display = 'none';
                }

                choiceInstances[select.id] = instancia;

                actualizarFiltrosIndependientes();
                // 3.3.1. Cuando se agrega un tag, ocultar dropdown
                instancia.passedElement.element.addEventListener('addItem', () => {
                    instancia.hideDropdown();
                });

                // 3.3.2. Toggle y bloqueo de clic/mousedown en .choices__inner
                const container = instancia.containerOuter.element;
                container.addEventListener('mousedown', e => {
                    if (e.target.closest('.choices__inner')) {
                        e.preventDefault();
                        e.stopImmediatePropagation();
                        Object.values(choiceInstances).forEach(otherInst => {
                            if (otherInst !== instancia) otherInst.hideDropdown();
                        });
                        if (instancia.dropdown && instancia.dropdown.isActive) {
                            instancia.hideDropdown();
                        } else {
                            instancia.showDropdown();
                        }
                    }
                }, { capture: true });
                container.addEventListener('click', e => {
                    if (e.target.closest('.choices__inner')) {
                        e.preventDefault();
                        e.stopImmediatePropagation();
                    }
                }, { capture: true });

                // 3.3.3. Cuando cambia la selección (on change), guardamos el filtro y aplicamos
                instancia.passedElement.element.addEventListener('change', e => {
                    const id = e.target.id;
                    const selected = Array.from(e.target.selectedOptions)
                        .map(opt => opt.value)
                        .filter(v => v !== "");
                    switch (id) {
                        case "filterTipoPropiedad":
                            filtros["Tipo de inmueble"] = selected;
                            break;
                        case "filterRangoPrecio":
                            filtros["Rango de precio"] = selected;
                            break;
                        case "filterZona":
                            filtros["Zona"] = selected;
                            break;
                        case "filterEstrato":
                            filtros["Estrato"] = selected;
                            break;
                        case "filterHabitaciones":
                            filtros["Habitaciones"] = selected;
                            break;
                        case "filterGaraje":
                            filtros["Garaje"] = selected;
                            break;
                        case "filterPisos":
                            filtros["Pisos"] = selected;
                            break;
                        case "filterBarrio":
                            filtros["Barrio"] = selected;
                            break;
                        case "filterConjunto":
                            filtros["Conjunto"] = selected;
                            break;
                    }
                    // Al cambiar un filtro independiente, recargamos tarjetas SIN hacer scroll
                    aplicarFiltros();

                });
            });



            // 3.4. Llamada inicial a aplicarFiltros() para mostrar todo
            aplicarFiltros();

            // 3.5. Ocultar spinner y mostrar filtros + contador
            document.getElementById("spinner").style.display = "none";
            document.getElementById("contador").classList.remove("hidden");
            document.querySelector('.filtros').classList.remove('hidden');
            document.getElementById("clearFilters").classList.remove("hidden");
            document.getElementById("ordenar-por").classList.remove("hidden");
            document.getElementById("aliados-grid-desktop").classList.remove("hidden");
            document.getElementById("aliados-m").classList.remove("hidden");
        }
        // ——— Aquí inicializamos nuestro dropdown “fake” de Ordenar por ———
        const toggle = document.getElementById('sortToggle');
        const list = document.getElementById('sortOptions');
        // 1) Al hacer clic en el toggle abrimos/cerramos
        toggle.addEventListener('click', e => {
            e.stopPropagation();
            list.classList.toggle('hidden');
        });
        // 2) Si se pulsa fuera, cerramos
        document.addEventListener('click', () => list.classList.add('hidden'));
        // 3) Cada opción…
        list.querySelectorAll('li').forEach(li => {
            li.addEventListener('click', () => {
                // actualizar texto del toggle
                toggle.textContent = li.textContent + ' ▼';
                // marcarla seleccionada
                list.querySelectorAll('li').forEach(x => x.classList.remove('selected'));
                li.classList.add('selected');
                // guardar criterio y reaplicar filtros
                criterioOrden = li.dataset.value;
                aplicarFiltros();
                // cerrar menú
                list.classList.add('hidden');
            });
        });

        // ─────────────────────────────────────────────────
        // 4. Función que llena los <select> iniciales (TODOS los datos)
        // ─────────────────────────────────────────────────
        function llenarOpcionesFiltros() {
            function llenarSelect(id, campo) {
                const select = document.getElementById(id);
                if (!select) return;

                let valores = [...new Set(datos.map(d => d[campo]).filter(v => v))];
                if (["Habitaciones", "Garaje", "Pisos"].includes(campo)) {
                    valores = valores
                        .map(v => Number(v))
                        .filter(v => !isNaN(v))
                        .sort((a, b) => a - b)
                        .map(v => String(v));
                } else {
                    valores = valores.sort();
                }

                select.innerHTML = `<option value="">${select.options[0].text}</option>` +
                    valores.map(v => {
                        const cantidad = datos.filter(d => String(d[campo]) === v).length;
                        return `<option value="${v}">${v} (${cantidad})</option>`;
                    }).join("");
            }

            llenarSelect("filterTipoPropiedad", "Tipo de inmueble");
            llenarSelect("filterRangoPrecio", "Rango de precio");
            llenarSelect("filterZona", "Zona");
            llenarSelect("filterBarrio", "Barrio");
            llenarSelect("filterConjunto", "Conjunto");
            llenarSelect("filterEstrato", "Estrato");
            llenarSelect("filterHabitaciones", "Habitaciones");
            llenarSelect("filterGaraje", "Garaje");
            llenarSelect("filterPisos", "Pisos");
        }
        // ─────────────────────────────────────────────────
        //  Función para ordenar lista
        // ─────────────────────────────────────────────────
        function ordenarLista(lista) {
            return lista.sort((a, b) => {
                if (criterioOrden === "menorPrecio" || criterioOrden === "mayorPrecio") {
                    // 1) Quitamos símbolos y puntos, sólo dígitos
                    const parsePrecio = txt => {
                        const num = parseFloat((txt || "").toString().replace(/[^\d]/g, "")) || 0;
                        return num;
                    };
                    const pa = parsePrecio(a["Precio"]);
                    const pb = parsePrecio(b["Precio"]);
                    return (criterioOrden === "menorPrecio" ? pa - pb : pb - pa);
                }

                if (criterioOrden === "rentabilidad") {
                    // 2) “no aplica” o sin datos → tratamiento como Infinity
                    const parseRet = txt => {
                        const num = parseFloat((txt || "").toString().replace(/[^\d.]/g, ""));
                        return isNaN(num) ? Infinity : num;
                    };
                    const ra = parseRet(a["Retorno de la Inversión"]);
                    const rb = parseRet(b["Retorno de la Inversión"]);
                    return ra - rb;
                }

                // sin orden
                return 0;
            });
        }
        // ─────────────────────────────────────────────────
        // 5. Función que aplica TODOS los filtros (independientes + dependientes)
        //    y luego vuelve a renderizar (sin scroll)
        // ─────────────────────────────────────────────────
        function aplicarFiltros() {
            // 5.1. Filtramos datos según TODO lo que tenga el objeto filtros
            let filtrados = datos.filter(d => {
                if (!filtroIncluye(d["Tipo de inmueble"], filtros["Tipo de inmueble"])) return false;
                if (!filtroIncluye(d["Rango de precio"], filtros["Rango de precio"])) return false;
                if (!filtroIncluye(d["Zona"], filtros["Zona"])) return false;
                if (!filtroIncluye(String(d["Estrato"]), filtros["Estrato"])) return false;
                if (!filtroIncluye(d["Barrio"], filtros["Barrio"])) return false;
                if (!filtroIncluye(d["Conjunto"], filtros["Conjunto"])) return false;
                if (!filtroIncluye(String(d["Habitaciones"]), filtros["Habitaciones"])) return false;
                if (!filtroIncluye(String(d["Garaje"]), filtros["Garaje"])) return false;
                if (!filtroIncluye(String(d["Pisos"]), filtros["Pisos"])) return false;

                if (filtros["Buscar"]) {
                    const textoRaw = filtros["Buscar"].toLowerCase();
                    const texto = textoRaw.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                    const combinadoRaw = (d["Nombre"] + " " + d["Código"] + " " + d["Descripción"] + " " + d["Puntos Clave"]).toLowerCase();
                    const combinado = combinadoRaw.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                    if (!combinado.includes(texto)) return false;
                }

                return true;
            });
            console.log('🔍 Antes de ordenar, criterioOrden=', criterioOrden, 'items=', filtrados.length);

            filtrados = ordenarLista(filtrados);
            console.log('🔍 Después de ordenar, primeras 3:', filtrados.slice(0, 3).map(d => ({
                Precio: d['Precio'],
                Retorno: d['Retorno de la Inversión']
            })));
            listaFiltrada = filtrados;
            paginaActual = 1;

            // 5.2. Volver a renderizar tarjetas SIN scroll (segundo parámetro false)
            renderizarTarjetas(listaFiltrada, false);
        }

        // ─────────────────────────────────────────────────
        // 6. Función auxiliar que comprueba inclusión (multi‐select / single‐select)
        // ─────────────────────────────────────────────────
        function filtroIncluye(valorDato, filtro) {
            if (!filtro || (Array.isArray(filtro) && filtro.length === 0)) return true;
            if (Array.isArray(filtro)) return filtro.includes(valorDato);
            return valorDato === filtro;
        }

        // ─────────────────────────────────────────────────
        // 7. Función para actualizar los filtros “independientes” (con contadores dinámicos)
        // ─────────────────────────────────────────────────
        function actualizarFiltrosIndependientes() {
            const filtrosInd = [
                ["filterTipoPropiedad", "Tipo de inmueble"],
                ["filterRangoPrecio", "Rango de precio"],
                ["filterZona", "Zona"],
                ["filterEstrato", "Estrato"],
                ["filterHabitaciones", "Habitaciones"],
                ["filterGaraje", "Garaje"],
                ["filterPisos", "Pisos"],
                ["filterBarrio", "Barrio"],
                ["filterConjunto", "Conjunto"]
            ];

            filtrosInd.forEach(([id, campo]) => {
                const instancia = choiceInstances[id];
                if (!instancia) return;

                // 7.1. Filtramos todos los datos según TODO lo que esté seleccionado, excepto el campo actual
                const subset = datos.filter(d => {
                    for (const [, campo2] of filtrosInd) {
                        if (campo2 === campo) continue;
                        const filtroValores = filtros[campo2];
                        if (filtroValores && Array.isArray(filtroValores) && filtroValores.length > 0) {
                            const valorDato = String(d[campo2]);
                            if (!filtroValores.includes(valorDato)) return false;
                        }
                    }
                    return true;
                });

                // 7.2. Obtenemos valores únicos de “datos” para este campo (ignoramos vacíos)
                let valores = [...new Set(
                    datos
                        .map(d => d[campo])
                        .filter(v => {
                            if (["Barrio", "Conjunto"].includes(campo)) {
                                return v !== undefined && v !== null && String(v).trim() !== "";
                            }
                            return v !== undefined && v !== null && String(v) !== "";
                        })
                )];

                // 7.3. Eliminamos de “valores” los que ya estén seleccionados
                const seleccionados = filtros[campo] || [];
                if (Array.isArray(seleccionados) && seleccionados.length > 0) {
                    valores = valores.filter(v => !seleccionados.includes(String(v)));
                }

                // 7.4. Ordenamos numérica o alfabéticamente
                if (["Habitaciones", "Garaje", "Pisos"].includes(campo)) {
                    valores = valores
                        .map(v => Number(v))
                        .filter(v => !isNaN(v))
                        .sort((a, b) => a - b)
                        .map(v => String(v));
                } else {
                    valores = valores.sort();
                }

                // 7.5. Construimos las “choices” con contador basándonos en “subset”
                const opciones = [
                    {
                        value: "",
                        label: instancia.passedElement.element.options[0].text,
                        selected: false,
                        disabled: true
                    },
                    ...valores.map(v => {
                        const cuenta = subset.filter(d => String(d[campo]) === v).length;
                        return {
                            value: v,
                            label: `${v} <span class="cuenta">(${cuenta})</span>`,
                            selected: false,
                            disabled: false,
                            cuenta
                        };
                    }).filter(obj => obj.cuenta > 0)
                ];

                instancia.clearChoices();
                instancia.setChoices(opciones, "value", "label", true);

                // 7.6. Re‐marcar los valores ya seleccionados
                const actuales = filtros[campo] || [];
                instancia.removeActiveItems();
                actuales.forEach(val => instancia.setChoiceByValue(val));
            });
        }

        // ─────────────────────────────────────────────────
        // 8. Función para renderizar las tarjetas (cards) + paginación + listeners
        // ─────────────────────────────────────────────────
        function renderizarTarjetas(lista = datos, hacerScroll = false) {
            const cont = document.getElementById("tarjetas");

            if (!lista.length) {
                cont.innerHTML = `<div class="noProp">No se encontraron propiedades.</div>`;
                document.getElementById("paginacion").innerHTML = "";
                return;
            }

            const inicio = (paginaActual - 1) * tarjetasPorPagina;
            const fin = inicio + tarjetasPorPagina;
            const paginaDatos = lista.slice(inicio, fin);

            cont.innerHTML = paginaDatos.map(d => `
                                      <div
                                        class="tarjeta ${["Directo", "Verbal"].includes(d["Contrato"]) ? "recomendado" : ""}"
                                        tabindex="0"
                                        role="button"
                                        aria-pressed="false"
                                        data-codigo="${d["Código"]}"
                                      >
                                        ${["Directo", "Verbal"].includes(d["Contrato"])
                    ? `<div class="ribbon"><span>¡Destacada!</span></div>`
                    : ``
                }
                                        <img src="${d["Image"]}" alt="Imagen de ${d["Nombre"]}" loading="lazy" />
                                        <div class="contenido">
                                          <h3 class="titulo">${d["Nombre"]}</h3>

                                          <p class="codigo">Código: ${d["Código"]}</p>
                                          <p class="precio">${formatearPrecio(d["Precio"])}</p>
                                          <div class="etiquetas">
                                            <span class="etiqueta">
                                              <img src="https://i.imgur.com/ykKdGwE.png" alt="Habitaciones" class="icono-etiqueta" />
                                              Habitaciones ${d["Habitaciones"]}
                                            </span>
                                            <span class="etiqueta">
                                              <img src="https://i.imgur.com/h9NqA32.png" alt="Baños" class="icono-etiqueta" />
                                              Baños ${d["Baños"]}
                                            </span>
                                            <span class="etiqueta">
                                              <img src="https://i.imgur.com/4Yixa77.png" alt="Garaje" class="icono-etiqueta" />
                                              Garaje ${d["Garaje"]}
                                            </span>
                                            <span class="etiqueta">
                                              <img src="https://i.imgur.com/rH6cXMa.png" alt="Cocina" class="icono-etiqueta" />
                                              Cocina ${d["Cocina"]}
                                            </span>
                                            <span class="etiqueta">
                                              Pisos ${d["Pisos"]}
                                            </span>
                                            <span class="etiqueta">
                                              <img src="https://i.imgur.com/rz72lGC.png" alt="Área lote" class="icono-etiqueta" />
                                              Lote ${d["Área lote"]} m²
                                            </span>
                                            <span class="etiqueta">
                                              ${d["Rentabilidad"]}
                                            </span>
                                          </div>
                                          <div class="comparar-container">
                                            <label class="comparar-label">
                                              <input
                                                type="checkbox"
                                                class="checkbox-comparar"
                                                data-codigo="${d["Código"]}"
                                                ${comparaciones.includes(d["Código"]) ? 'checked' : ''}
                                              />
                                              Comparar
                                            </label>
                                          </div>
                                        </div>
                                      </div>
                                    `).join("");

            // ─────────── SCROLL solo si no es la primera carga Y hacerScroll === true ───────────
            if (!primeraCarga && hacerScroll) {
                document
                    .getElementById("filterBuscar")
                    .scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            primeraCarga = false;



            // 8.1. Volver a enlazar listeners para abrir modal al hacer click o Enter
            document.querySelectorAll(".tarjeta").forEach(card => {
                card.addEventListener("click", () => abrirModal(card.dataset.codigo));
                card.addEventListener("keydown", e => {
                    if (e.key === "Enter" || e.key === " ") {
                        e.preventDefault();
                        abrirModal(card.dataset.codigo);
                    }
                });
            });

            // 8.2. Renderizar la paginación y actualizar contador
            renderizarPaginacion(lista.length);
            actualizarContador();

            // 8.3. Volver a enlazar la lógica de “comparar”
            enlazarComparar();
        }

        // ─────────────────────────────────────────────────
        // 9. Funciones de banner comparar
        // ─────────────────────────────────────────────────
        // Variable global para llevar el conteo de comparaciones
        let comparaciones = [];
        const propiedades = {}; // Aquí guardaremos las propiedades por código

        function enlazarComparar() {
            const banner = document.getElementById('bannerComparar');
            const texto = document.getElementById('textoComparar');
            const btn = document.getElementById('btnComparar');

            // Evitar que se abra el modal al hacer clic en checkbox o etiqueta
            document.querySelectorAll('.checkbox-comparar, .comparar-label').forEach(el => {
                el.addEventListener('click', e => e.stopPropagation());
            });

            // Mapear propiedades para fácil acceso por código
            document.querySelectorAll('.checkbox-comparar').forEach(chk => {
                const tarjeta = chk.closest('.tarjeta'); // o el contenedor que tenga los datos
                const codigo = chk.dataset.codigo;

                // Puedes adaptar esto si ya tienes una lista `data` de todas las propiedades
                propiedades[codigo] = {
                    codigo,
                    nombre: tarjeta?.querySelector('.modal-titulo')?.textContent || 'Propiedad',
                    imagen: tarjeta?.querySelector('img')?.src || '',
                    tipo: tarjeta?.querySelector('.tipo')?.textContent || 'Inmueble',
                };

                chk.addEventListener('change', e => {
                    const id = e.target.dataset.codigo;

                    if (e.target.checked) {
                        if (comparaciones.length < 2) {
                            comparaciones.push(id);
                        } else {
                            e.target.checked = false;
                            alert('Solo puedes comparar 2 propiedades.');
                        }
                    } else {
                        comparaciones = comparaciones.filter(c => c !== id);
                    }

                    actualizarBanner();
                });
            });

            btn.onclick = () => mostrarComparacion(comparaciones);
            document.getElementById('btnLimpiarComparar').addEventListener('click', limpiarComparaciones);
        }

        function actualizarBanner() {
            const banner = document.getElementById('bannerComparar');
            const texto = document.getElementById('textoComparar');

            texto.textContent = `Has seleccionado ${comparaciones.length} propiedad(es)`;
            banner.classList.toggle('hidden', comparaciones.length === 0);

            actualizarMiniaturas();
        }

        function actualizarMiniaturas() {
            const contenedor = document.getElementById('miniaturasComparar');
            contenedor.innerHTML = '';

            comparaciones.forEach(codigo => {
                const prop = propiedades[codigo];
                const div = document.createElement('div');
                div.className = 'relative group';

                div.innerHTML = `
                                            <div class="group relative inline-block">
                                                <!-- TOOLTIP FLOTÁNTE -->
                                                <div class="tooltip-miniatura">
                                                    <img src="${prop.imagen}" alt="${prop.nombre}" class="w-24 h-24 object-cover rounded mb-2">
                                                </div>
                                                <!-- CHIP -->
                                                <div class="chip-miniatura flex items-center">
                                                    <!-- Bloque imagen + código (en columna) -->
                                                    <div class="chip-imagen">
                                                        <img src="${prop.imagen}" alt="" class="chip-thumb mb-1" />
                                                        <span class="chip-code text-white font-semibold">${codigo}</span>
                                                    </div>
                                                    <div class="chip-separator"></div>
                                                    <button class="btn-x-tooltip ml-2" data-codigo="${codigo}">&times;</button>
                                                </div>


                                            </div>
                                            `;

                contenedor.appendChild(div);
            });

            // Evento para eliminar desde la X
            contenedor.querySelectorAll('.btn-x-tooltip, .btn-x-tooltip-interno')
                .forEach(btn => {
                    btn.addEventListener('click', e => {
                        const cod = e.target.dataset.codigo;
                        comparaciones = comparaciones.filter(c => c !== cod);
                        document.querySelector(`.checkbox-comparar[data-codigo="${cod}"]`).checked = false;
                        actualizarMiniaturas();
                        actualizarBanner();



                        const banner = document.getElementById('bannerComparar');
                        banner.classList.toggle('hidden', comparaciones.length === 0);
                    });
                });
        }

        function mostrarComparacion(ids) {
            const seleccionadas = datos.filter(d => ids.includes(d["Código"]));
            const [a, b] = seleccionadas;

            function determinarMejorPropiedad(prop, a, b) {
                const limpiarNumero = v =>
                    parseFloat((v || "").toString().replace(/[^\d.]/g, "")) || 0;
                const prioridadTexto = v => (v || "").toString().toLowerCase();

                const rawA = a[prop];
                const rawB = b[prop];
                const normA = prioridadTexto(rawA);
                const normB = prioridadTexto(rawB);

                // ✋ Si alguno es “no aplica”, vacío o inexistente, no comparamos
                if (
                    !rawA || !rawB ||
                    normA === "no aplica" || normB === "no aplica"
                ) {
                    return "";
                }

                switch (prop) {
                    case "Precio":
                    case "Administración": {
                        const valA = limpiarNumero(rawA);
                        const valB = limpiarNumero(rawB);
                        if (valA < valB) return "a";
                        if (valB < valA) return "b";
                        return "";
                    }
                    case "Habitaciones":
                    case "Baños":
                    case "Garaje":
                    case "Closet":
                    case "Área lote":
                    case "Área Construida": {
                        const valA = limpiarNumero(rawA);
                        const valB = limpiarNumero(rawB);
                        if (valA > valB) return "a";
                        if (valB > valA) return "b";
                        return "";
                    }
                    case "Cocina": {
                        const score = txt => {
                            const t = prioridadTexto(txt);
                            if (t === "integral") return 3;
                            if (t === "semi-integral" || t === "semi integral") return 2;
                            return 1;
                        };
                        const aScore = score(rawA);
                        const bScore = score(rawB);
                        if (aScore > bScore) return "a";
                        if (bScore > aScore) return "b";
                        return "";
                    }
                    case "Piscina": {
                        // Definimos una puntuación según el tipo de piscina:
                        //   4 = social/jacuzzi
                        //   3 = privada o jacuzzi
                        //   2 = solo social
                        //   1 = no tiene
                        const scorePiscina = txt => {
                            const t = prioridadTexto(txt);
                            if (t.includes("social") && t.includes("jacuzzi")) return 4;
                            if (t.includes("privada") || t.includes("jacuzzi")) return 3;
                            if (t.includes("social")) return 2;
                            return 1; // "no tiene" u otros
                        };
                        const aScore = scorePiscina(rawA);
                        const bScore = scorePiscina(rawB);
                        if (aScore > bScore) return "a";
                        if (bScore > aScore) return "b";
                        return "";
                    }
                    case "Ubicación": {
                        // esquinera > medianera > otro
                        if (normA.includes("esquinera") && !normB.includes("esquinera")) return "a";
                        if (normB.includes("esquinera") && !normA.includes("esquinera")) return "b";
                        if (normA.includes("medianera") && !normB.includes("medianera")) return "a";
                        if (normB.includes("medianera") && !normA.includes("medianera")) return "b";
                        return "";
                    }
                    case "Retorno de la Inversión": {
                        const valA = limpiarNumero(rawA);
                        const valB = limpiarNumero(rawB);
                        if (valA < valB) return "a"; // menor años es mejor
                        if (valB < valA) return "b";
                        return "";
                    }
                    case "Rentabilidad": {
                        const valA = limpiarNumero(rawA);
                        const valB = limpiarNumero(rawB);
                        if (valA > valB) return "a";
                        if (valB > valA) return "b";
                        return "";
                    }
                    default:
                        return "";
                }
            }

            const esMovil = window.innerWidth <= 767;

            const props = [
                "Código", "Precio", "Habitaciones", "Baños", "Cocina", "Garaje", "Closet", "Pisos",
                "Área lote", "Área Construida", "Piscina", "Ubicación",
                "Conjunto", "Barrio", "Zona", "Estrato", "Rentabilidad", "Retorno de la Inversión",
                "Puntos Clave", "Administración"
            ];

            let tablaHTML = "";

            if (esMovil) {
                tablaHTML = `
<thead>
                                  <tr class="fila-titulo">
                                    <th colspan="2" style="text-align: center; padding: 10px;">
                                      <h2 class="modal-comparar-titulo" style="margin-top: 15px;">Compara tu inmueble</h2>
                                      <div class="modal-comparar-linea"></div>
                                    </th>
                                  </tr>
                                  <tr class="fila-imagenes" style="width: 100%;">
                                    <th style="width: 50%; padding: 5px;">
                                      <img src="${a.Image}" alt="${a.Nombre}" class="modal-imagen-comparar" style="max-width: 100%; height: auto; display: block; margin: 0 auto;"/>
                                      <div style="text-align: center; margin-top: 5px;">
                                        <a href="${a["Google Fotos"]}" target="_blank" class="boton-fotos" style="background-color: #be8939; color: white; padding: 8px 12px; border-radius: 5px; text-decoration: none; font-weight: bold; display: inline-block;">
                                          📷 Ver más fotos
                                        </a>
                                      </div>
                                    </th>
                                    <th style="width: 50%; padding: 5px;">
                                      <img src="${b.Image}" alt="${b.Nombre}" class="modal-imagen-comparar" style="max-width: 100%; height: auto; display: block; margin: 0 auto;"/>
                                      <div style="text-align: center; margin-top: 5px;">
                                        <a href="${b["Google Fotos"]}" target="_blank" class="boton-fotos" style="background-color: #be8939; color: white; padding: 8px 12px; border-radius: 5px; text-decoration: none; font-weight: bold; display: inline-block;">
                                          📷 Ver más fotos
                                        </a>
                                      </div>
                                    </th>
                                  </tr>
                                  <tr class="fila-codigos">
                                    <th style="width: 50%; text-align:center; padding-top: 0px;">
                                      ${a.Nombre}
                                    </th>
                                    <th style="width: 50%; text-align:center; padding-top: 0px;">
                                      ${b.Nombre}
                                    </th>
                                  </tr>
</thead>
<tbody>
                                  ${props.map(prop => {
                    const valorA = prop === "Precio" ? formatearPrecio(a[prop]) :
                        prop === "Administración" ? (a[prop] === "No aplica" ? "No aplica" : formatearPrecio(a[prop])) :
                            prop === "Área lote" || prop === "Área Construida" ? `${a[prop]} m²` :
                                prop === "Rentabilidad" ? (a[prop] || "-").replace(/^Rentabilidad:\s*/, "") :
                                    a[prop] || "-";
                    const valorB = prop === "Precio" ? formatearPrecio(b[prop]) :
                        prop === "Administración" ? (b[prop] === "No aplica" ? "No aplica" : formatearPrecio(b[prop])) :
                            prop === "Área lote" || prop === "Área Construida" ? `${b[prop]} m²` :
                                prop === "Rentabilidad" ? (b[prop] || "-").replace(/^Rentabilidad:\s*/, "") :
                                    b[prop] || "-";

                    const mejor = determinarMejorPropiedad(prop, a, b);

                    return `
                                      <tr class="fila-caracteristica">
                                        <th colspan="2" style="text-align:center; padding-top: 0px;">${prop}</th>
                                      </tr>
                                      <tr>
                                        <td style="width: 50%; text-align:center; position: relative;">
                                          ${mejor === "a" ? `<span class="checkmark">✔</span>` : ""}
                                          ${valorA}

                                        </td>
                                        <td style="width: 50%; text-align:center; position: relative;">
                                          ${valorB}
                                          ${mejor === "b" ? `<span class="checkmark">✔</span>` : ""}
                                        </td>
                                      </tr>
                                    `;
                }).join('')}
</tbody>
`;
            } else {
                tablaHTML = `
<thead>
                                  <tr class="fila-titulo">
                                    <th colspan="3" style="text-align: center; padding: 10px;">
                                      <h2 class="modal-comparar-titulo">Compara tu inmueble</h2>
                                      <div class="modal-comparar-linea"></div>
                                    </th>
                                  </tr>
                                  <tr class="fila-imagenes">
                                    <th></th>
                                    <th><img src="${a.Image}" alt="${a.Nombre}" class="modal-imagen-comparar"/></th>
                                    <th><img src="${b.Image}" alt="${b.Nombre}" class="modal-imagen-comparar"/></th>
                                  </tr>
                                  <tr class="fila-info">
                                    <th></th>
                                    <th>
                                      <div class="modal-info-bloque modal-info-bloque-comparar">
                                        <a href="${a["Google Fotos"]}" target="_blank" class="boton-fotos">📷 Ver más fotos</a>
                                      </div>
                                    </th>
                                    <th>
                                      <div class="modal-info-bloque modal-info-bloque-comparar">
                                        <a href="${b["Google Fotos"]}" target="_blank" class="boton-fotos">📷 Ver más fotos</a>
                                      </div>
                                    </th>
                                  </tr>
                                  <tr>
                                    <th>Característica</th>
                                    <th>${a.Nombre}</th>
                                    <th>${b.Nombre}</th>
                                  </tr>
</thead>
<tbody>
                                  ${props.map(prop => {
                    const valorA = prop === "Precio" ? formatearPrecio(a[prop]) :
                        prop === "Administración" ? (a[prop] === "No aplica" ? "No aplica" : formatearPrecio(a[prop])) :
                            prop === "Área lote" || prop === "Área Construida" ? `${a[prop]} m²` :
                                prop === "Rentabilidad" ? (a[prop] || "-").replace(/^Rentabilidad:\s*/, "") :
                                    a[prop] || "-";
                    const valorB = prop === "Precio" ? formatearPrecio(b[prop]) :
                        prop === "Administración" ? (b[prop] === "No aplica" ? "No aplica" : formatearPrecio(b[prop])) :
                            prop === "Área lote" || prop === "Área Construida" ? `${b[prop]} m²` :
                                prop === "Rentabilidad" ? (b[prop] || "-").replace(/^Rentabilidad:\s*/, "") :
                                    b[prop] || "-";

                    const mejor = determinarMejorPropiedad(prop, a, b);

                    return `
                                      <tr>
                                        <td class="carac-nombre">${prop}</td>
                                        <td style="position: relative;">
                                        ${mejor === "a" ? `<span class="checkmark">✔</span>` : ""}
                                        ${valorA}
                                        </td>
                                        <td style="position: relative;">
                                          ${valorB}
                                          ${mejor === "b" ? `<span class="checkmark">✔</span>` : ""}
                                        </td>
                                      </tr>
                                    `;
                }).join('')}
</tbody>
`;
            }

            const html = `
<div class="modal-comparar">
                                  <button class="modal-close btn-cerrar">×</button>
                                  <div class="comparar-tabla-wrapper" style="grid-column: 1 / span 3;">
                                    <table class="modal-tabla-caracteristicas comparar-tabla">
                                      ${tablaHTML}
                                      <tfoot>
                                        <tr class="fila-botones">
                                       <td class="solo-escritorio"></td>
                                          <td>
                                            <a id="compararWhatsappA"
                                               href="#"
                                               target="_blank"
                                               class="boton-fotos"
                                               style="background-color: #be8939; color: white; padding: 8px 12px;; border-radius: 5px; text-decoration: none; display: inline-block; font-weight: bold;">
                                              ✆ Agendar visita por WhatsApp
                                            </a>
                                          </td>

                                          <td>
                                            <a id="compararWhatsappB"
                                               href="#"
                                               target="_blank"
                                               class="boton-fotos"
                                               style="background-color: #be8939; color: white; padding: 8px 12px;; border-radius: 5px; text-decoration: none; display: inline-block; font-weight: bold;">
                                              ✆ Agendar visita por WhatsApp
                                            </a>
                                          </td>
                                        </tr>
                                      </tfoot>
                                    </table>
                                  </div>
</div>
`;

            const wrapper = document.createElement('div');
            wrapper.id = 'compararModal';
            wrapper.classList.add('modal-overlay', 'active');
            wrapper.innerHTML = html;
            document.body.appendChild(wrapper);
            history.pushState({ modalAbierto: true }, '', '');

            // Cierre del modal
            wrapper.querySelector('.btn-cerrar').addEventListener('click', cerrarComparar);

            // 3) Actualizar los href de los botones con tu función existente
            const mensajeA = `Hola, quiero agendar una visita para ver el inmueble ${a["Código"]} `;
            const mensajeB = `Hola, quiero agendar una visita para ver el inmueble ${b["Código"]} `;
            document.getElementById('compararWhatsappA').href =
                `https://wa.me/573208762117?text=${encodeURIComponent(mensajeA)}`;
            document.getElementById('compararWhatsappB').href =
                `https://wa.me/573208762117?text=${encodeURIComponent(mensajeB)}`;
        }

        function limpiarComparaciones() {
            comparaciones = [];
            document.querySelectorAll('.checkbox-comparar').forEach(chk => chk.checked = false);
            actualizarMiniaturas();
            actualizarBanner();
        }

        function cerrarComparar() {
            history.back();
            document.getElementById('compararModal')?.remove();
            // Opcional: resetear checkboxes y banner

            actualizarBanner();
        }




        // ─────────────────────────────────────────────────
        // 10. Funciones de modal
        // ─────────────────────────────────────────────────
        function abrirModal(codigo) {
            const inmueble = datos.find(d => d["Código"] === codigo);
            if (!inmueble) return;

            document.getElementById("modalImagen").src = inmueble["Image"];
            document.getElementById("modalImagen").alt = "Imagen de " + inmueble["Nombre"];
            document.getElementById("modalTitle").textContent = inmueble["Nombre"];
            document.getElementById("modalTipo").textContent = inmueble["Tipo de inmueble"];
            document.getElementById("modalCodigo").textContent = inmueble["Código"];
            document.getElementById("modalPrecio").textContent = formatearPrecio(inmueble["Precio"]);
            document.getElementById("modalDescripcion").textContent = inmueble["Descripción"];
            document.getElementById("modalPuntosClave").textContent = inmueble["Puntos Clave"];
            actualizarBotonWhatsapp();
            // Bloque etiquetas (columna izq)
            const etiquetasCont = document.getElementById("modalEtiquetas");
            etiquetasCont.innerHTML = `
                                                <span class="modal-etiqueta">
                                  <img src="https://i.imgur.com/ykKdGwE.png" alt="Habitaciones" class="icono-etiqueta" />
                                  Habitaciones ${inmueble["Habitaciones"] || '-'}
</span>
<span class="modal-etiqueta">
                                  <img src="https://i.imgur.com/h9NqA32.png" alt="Baños" class="icono-etiqueta" />
                                  Baños ${inmueble["Baños"] || '-'}
</span>
<span class="modal-etiqueta">
                                  <img src="https://i.imgur.com/4Yixa77.png" alt="Garaje" class="icono-etiqueta" />
                                  Garaje ${inmueble["Garaje"] || '-'}
</span>
<span class="modal-etiqueta">
                                  <img src="https://i.imgur.com/rH6cXMa.png" alt="Cocina" class="icono-etiqueta" />
                                  Cocina ${inmueble["Cocina"] || '-'}
</span>
<span class="modal-etiqueta">
                                  Pisos ${inmueble["Pisos"] || '-'}
</span>
<span class="modal-etiqueta">
                                  <img src="https://i.imgur.com/rz72lGC.png" alt="Área lote" class="icono-etiqueta" />
                                  Lote ${inmueble["Área lote"] || '-'} m²
</span>
<span class="modal-etiqueta">
                                  ${inmueble["Rentabilidad"] || '-'}
</span>

                                                `;

            // Tabla características (columna derecha)
            const tabla = document.getElementById("modalTablaCaracteristicas");
            tabla.innerHTML = `
                                                    <tr><td>Ciudad</td><td>${inmueble["Ciudad"] || '-'}</td></tr>
                                                <tr><td>Zona</td><td>${inmueble["Zona"] || '-'}</td></tr>
                                                <tr><td>Estrato</td><td>${inmueble["Estrato"] || '-'}</td></tr>
                                                <tr><td>Ubicación</td><td>${inmueble["Ubicación"] || '-'}</td></tr>
                                                <tr><td>Piscina</td><td>${inmueble["Piscina"] || '-'}</td></tr>
                                                <tr><td>Área construida</td><td>${inmueble["Área Construida"] || '-'} m²</td></tr>
                                                <tr><td>Administración</td><td>${inmueble["Administración"]?.toString().trim().toLowerCase() === "no aplica" ? "No aplica" : formatearPrecio(inmueble["Administración"])}</td></tr>
                                                <tr><td>Retorno de la inversión</td><td>${inmueble["Retorno de la Inversión"] || '-'}</td></tr>
                                                `;

            // Link fotos
            const linkFotos = document.getElementById("modalLinkFotos");
            if (inmueble["Google Fotos"]) {
                linkFotos.href = inmueble["Google Fotos"];
                linkFotos.style.display = "inline-block";
            } else {
                linkFotos.style.display = "none";
            }

            // Mostrar modal
            const overlay = document.getElementById("modalOverlay");
            overlay.style.display = "flex";
            overlay.classList.add("active");
            overlay.focus();
            // Empujamos un estado indicando que el modal está abierto
            history.pushState({ modalAbierto: true }, '', '');
        }


        // Cerrar modal
        function cerrarModal() {
            history.back();
            const overlay = document.getElementById("modalOverlay");
            overlay.classList.remove("active");
            overlay.style.display = "none";

        }


        // Eventos para cerrar modal
        document.querySelector(".modal-close").addEventListener("click", cerrarModal);
        document.getElementById("modalOverlay").addEventListener("click", e => {
            if (e.target.id === "modalOverlay") cerrarModal();
        });
        document.addEventListener("keydown", e => {
            if (e.key === "Escape") cerrarModal();
        });

        window.addEventListener('popstate', event => {
            // Si al retroceder el estado ahora es modalAbierto:false, cerramos el overlay
            if (event.state && event.state.modalAbierto === false) {
                // 1) Cerrar overlay principal si está abierto
                const overlay = document.getElementById("modalOverlay");
                if (overlay && overlay.classList.contains("active")) {
                    overlay.classList.remove("active");
                    overlay.style.display = "none";
                }
                // 2) Cerrar modal de comparación si está abierto
                const compararModal = document.getElementById("compararModal");
                if (compararModal) {
                    compararModal.remove();
                }
            }
        });
        // ─────────────────────────────────────────────────
        // 11. Otras funciones
        // ─────────────────────────────────────────────────

        function cambiarPagina(nuevaPagina) {
            paginaActual = nuevaPagina;
            renderizarTarjetas(listaFiltrada.length ? listaFiltrada : datos, true);
        }

        function renderizarPaginacion(totalItems) {
            const totalPaginas = Math.ceil(totalItems / tarjetasPorPagina);
            const paginacion = document.getElementById("paginacion");
            paginacion.innerHTML = "";
            if (totalPaginas <= 1) return;

            const crearBoton = (texto, pagina, deshabilitado = false) => {
                const btn = document.createElement("button");
                btn.textContent = texto;
                btn.classList.add("boton-paginacion");
                if (deshabilitado) {
                    btn.disabled = true;
                    btn.classList.add("boton-deshabilitado");
                } else {
                    btn.onclick = () => cambiarPagina(pagina);
                }
                return btn;
            };

            // Anterior
            paginacion.appendChild(
                crearBoton("〈 Anterior", paginaActual - 1, paginaActual === 1)
            );

            // Página 1 siempre
            const btn1 = crearBoton("1", 1, false);
            if (paginaActual === 1) btn1.classList.add("pagina-actual");
            paginacion.appendChild(btn1);

            // Si estamos en página 3 o más, metemos puntos antes del bloque central
            if (paginaActual >= 3) {
                const dots = document.createElement("span");
                dots.textContent = "…";
                dots.classList.add("puntos-paginacion");
                paginacion.appendChild(dots);
            }

            // Bloque de páginas: vecinos de la actual
            // Siempre mostramos current-1, current, current+1 si existen y no son 1 ni > total
            const start = Math.max(2, paginaActual - 1);
            const end = Math.min(totalPaginas - 1, paginaActual + 1);
            for (let p = start; p <= end; p++) {
                if (p === 1) continue;
                const btn = crearBoton(p.toString(), p);
                if (p === paginaActual) btn.classList.add("pagina-actual");
                paginacion.appendChild(btn);
            }

            // Siguiente
            paginacion.appendChild(
                crearBoton("Siguiente 〉", paginaActual + 1, paginaActual === totalPaginas)
            );
        }

        function actualizarContador() {
            console.log("Contador llamado. listaFiltrada:", listaFiltrada.length, "página:", paginaActual);
            const total = listaFiltrada.length;
            if (total === 0) {
                document.getElementById('contador').textContent = "0 de 0";
                return;
            }

            const inicio = (paginaActual - 1) * tarjetasPorPagina + 1;
            const fin = Math.min(paginaActual * tarjetasPorPagina, total);

            document.getElementById('contador').textContent = `${inicio}–${fin} / ${total}`;
        }

        function formatearPrecio(numero) {
            return "$" + Number(numero).toLocaleString("es-CO").replace(/,/g, "'");
        }

        function actualizarBotonWhatsapp() {
            const codigo = document.getElementById("modalCodigo")?.textContent?.trim();
            if (!codigo) return;

            const mensaje = `Hola, quiero agendar una visita para ver el inmueble ${codigo}`;
            const url = `https://wa.me/573208762117?text=${encodeURIComponent(mensaje)}`;

            document.getElementById("modalBotonWhatsapp").href = url;
        }

        function mostrarAlertaComparacion() {
            const alerta = document.getElementById("alerta-comparacion");
            alerta.classList.remove("hidden", "opacity-0");
            alerta.classList.add("opacity-100");

            setTimeout(() => {
                alerta.classList.remove("opacity-100");
                alerta.classList.add("opacity-0");
                setTimeout(() => {
                    alerta.classList.add("hidden");
                }, 300);
            }, 3000);
        }

        // ─────────────────────────────────────────────────
        // 12. CONFIGURACIÓN DE EVENTOS DE FILTROS
        // ─────────────────────────────────────────────────

        // Eventos de filtros
        document.querySelectorAll(".filtros select").forEach(select => {
            select.addEventListener("change", e => {
                const id = e.target.id;

                // Aquí detectamos si es múltiple y obtenemos todas las opciones seleccionadas
                let val;
                if (e.target.multiple) {
                    val = Array.from(e.target.selectedOptions).map(opt => opt.value).filter(v => v !== "");
                } else {
                    val = e.target.value;
                }

                switch (id) {
                    case "filterTipoPropiedad": filtros["Tipo de inmueble"] = val; break;
                    case "filterRangoPrecio": filtros["Rango de precio"] = val; break;
                    case "filterZona": filtros["Zona"] = val; break;
                    case "filterEstrato": filtros["Estrato"] = val; break;
                    case "filterBarrio": filtros["Barrio"] = val; break;
                    case "filterConjunto": filtros["Conjunto"] = val; break;
                    case "filterHabitaciones": filtros["Habitaciones"] = val; break;
                    case "filterGaraje": filtros["Garaje"] = val; break;
                    case "filterPisos": filtros["Pisos"] = val; break;
                }
                actualizarFiltrosIndependientes();
                aplicarFiltros();
            });
        });

        document.getElementById("filterBuscar").addEventListener("input", e => {
            filtros["Buscar"] = e.target.value.trim();
            aplicarFiltros();
        });



        // ─────────────────────────────────────────────────
        // 13. Listener para el botón “Limpiar filtros”
        // ─────────────────────────────────────────────────

        document.getElementById('clearFilters').addEventListener('click', () => {

            // 1) Limpiar el objeto global filtros
            filtros["Tipo de inmueble"] = [];
            filtros["Rango de precio"] = [];
            filtros["Zona"] = [];
            filtros["Barrio"] = [];
            filtros["Estrato"] = [];
            filtros["Conjunto"] = [];
            filtros["Habitaciones"] = [];
            filtros["Garaje"] = [];
            filtros["Pisos"] = [];
            filtros["Buscar"] = "";

            // 2) Limpia visualmente todas las selecciones
            Object.values(choiceInstances).forEach(instance => {
                instance.removeActiveItems(); // borra cada “tag” seleccionado
            });

            // 3) (Opcional) resetea también el valor interno del select
            document.querySelectorAll('.filtros select[multiple]').forEach(sel => {
                sel.value = [];
            });

            // 3) Limpia el campo de búsqueda
            const buscar = document.getElementById('filterBuscar');
            buscar.value = '';

            // 4) Actualiza dependientes y vuelve a renderizar
            actualizarFiltrosIndependientes();
            aplicarFiltros();
        });

        // ─────────────────────────────────────────────────
        // 14. PANEL “GIF CONTAINER” + TOGGLE DE SERVICIOS
        // ─────────────────────────────────────────────────
        // Seleccionamos TODOS los toggles y TODOS los contenedores
        const toggles = document.querySelectorAll('.toggle-services');
        const containers = {
            gif: document.querySelector('.gif-container'),
            fixed: document.querySelector('.fixed-header')
        };

        // Función genérica para abrir/cerrar paneles en un contenedor dado
        function togglePanels(container) {
            if (!container.classList.contains('open-panel1')) {
                container.classList.add('open-panel1');
                setTimeout(() => container.classList.add('open-panel2'), 400);
            } else {
                container.classList.remove('open-panel2');
                setTimeout(() => container.classList.remove('open-panel1'), 300);
            }
        }

        // Asociamos el evento a cada toggle
        toggles.forEach(toggle => {
            toggle.addEventListener('click', e => {
                e.preventDefault();
                // Detectamos de cuál contenedor vino el toggle
                const inGif = !!toggle.closest('.gif-container');
                const inFix = !!toggle.closest('.fixed-header');
                if (inGif) {
                    togglePanels(containers.gif);
                }
                if (inFix) {
                    togglePanels(containers.fixed);
                }
            });
        });

        // Los mismos cierres con X, duplicándolos para ambos paneles
        document.querySelectorAll('.salir-servicios, .salir-servicios2').forEach(btn => {
            btn.addEventListener('click', () => {
                // cerramos ambos por seguridad
                ['gif', 'fixed'].forEach(key => {
                    const c = containers[key];
                    c.classList.remove('open-panel2');
                    setTimeout(() => c.classList.remove('open-panel1'), 300);
                });
            });
        });

        // Cerrar al hacer clic fuera de cualquiera de los dos contenedores
        document.addEventListener('click', e => {
            ['gif', 'fixed'].forEach(key => {
                const c = containers[key];
                if (c.contains(e.target)) return;  // click dentro → no cerramos
                if (c.classList.contains('open-panel1')) {
                    c.classList.remove('open-panel2');
                    setTimeout(() => c.classList.remove('open-panel1'), 300);
                }
            });
        });



        // ─────────────────────────────────────────────────
        // 14. Reemplazamos DOMContentLoaded por window.onload
        // ─────────────────────────────────────────────────
        window.addEventListener('load', () => {
            // 1) Estado inicial en historial
            history.replaceState({ modalAbierto: false }, '', '');

            // 2) Inicia carga de datos, menús, etc.
            cargarDatos();

            // 3) Menú hamburguesa
            // 1) Para cada menú hamburguesa (tanto en GIF como en fixed)
            document.querySelectorAll('.menu-container').forEach(container => {
                const icon = container.querySelector('.menu-icon');
                const menu = container.querySelector('.menu');
                if (!icon || !menu) return;

                icon.addEventListener('click', e => {
                    e.stopPropagation();                    // que no suba al document
                    // cerramos cualquier otro menú abierto
                    document.querySelectorAll('.menu-container .menu.active')
                        .forEach(m => m !== menu && m.classList.remove('active'));
                    // toggle sólo el nuestro
                    menu.classList.toggle('active');
                });
            });

            // 4) Listener global: si pinchas FUERA de **cualquiera** de estos contenedores, cerramos todo
            document.addEventListener('click', e => {
                // comprobamos si el click ocurrió _dentro_ de algún menu-container O
                // dentro de alguno de los panels de servicios
                if (
                    e.target.closest('.menu-container') ||
                    e.target.closest('.services-panel')
                ) {
                    return; // no cerramos nada si el click fue dentro
                }
                // si llegamos aquí, el click fue fuera: cerramos menús y paneles
                document.querySelectorAll('.menu-container .menu.active')
                    .forEach(m => m.classList.remove('active'));
                document.querySelectorAll('.gif-container.open-panel1, .gif-container.open-panel2')
                    .forEach(gif => {
                        gif.classList.remove('open-panel2');
                        setTimeout(() => gif.classList.remove('open-panel1'), 0);
                    });
            });
            // ───────────── IntersectionObserver para el banner fijo ─────────────
            const gifCont = document.querySelector('.gif-container');
            const fixedHeader = document.querySelector('.fixed-header');
            const sentinel = document.getElementById('header-sentinel');

            if (gifCont && fixedHeader && sentinel) {
                const io = new IntersectionObserver(entries => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            // → el sentinel está visible → el banner principal sigue en su lugar
                            gifCont.style.display = '';
                            fixedHeader.classList.remove('active');
                        } else {
                            // → el sentinel ya salió de la vista → hacemos sticky el fixed-header
                            gifCont.style.display = 'none';
                            fixedHeader.classList.add('active');
                        }
                    });
                }, {
                    root: null,       // viewport
                    threshold: 0      // dispara apenas el sentinel sale/intra
                });

                io.observe(sentinel);
            }
            // 6) Listener para recargar al hacer click en el logo
            const logoEl = document.querySelector('.logo');
            if (logoEl) {
                logoEl.addEventListener('click', () => location.reload());
            }

            // 7) Cerrar modalComparacion al hacer clic fuera
            document.addEventListener('click', e => {
                const modal = document.getElementById('modalComparacion');
                if (!modal || modal.classList.contains('hidden')) return;
                if (
                    modal.contains(e.target) ||
                    e.target.closest('#btnComparar') ||
                    e.target.closest('#btnLimpiarComparar')
                ) return;
                modal.classList.add('hidden');
            });

            // 8) Listener de ordenación (sortSelect)
            const sortSelect = document.getElementById('sortSelect');
            if (!sortSelect) {
                console.error('❌ No encontré #sortSelect en el DOM');
            } else {
                sortSelect.addEventListener('change', e => {
                    criterioOrden = e.target.value;
                    console.log('🔄 Nuevo criterioOrden:', criterioOrden);
                    aplicarFiltros();
                });
            }
        });

        /* === Configuración de hover/transiciones ============================== */
        const HOVER_MS = 320;
        const HOVER_EASE = "cubic-bezier(.2,.6,.2,1)";

        /* === Orden de revelado por grupos (sincronizado por fila) ============= */
        /* 1) img1 + slot1 + jovel
           2) slot2
           3) slot3 + slot4 + img2
           4) slot5 + slot6
        */
        const REVEAL_STEPS = [
            ["cell-img1", "cell-slot1", "cell-jovel"],
            ["cell-slot2"],
            ["cell-slot3", "cell-slot4", "cell-img2"],
            ["cell-slot5", "cell-slot6"]
        ];

        /* === Logos por celda (hardcoded, sin API) ============================== */
        const DESK_SLOTS = [
            {
                cell: "cell-slot1",
                name: "Soluciones La Primavera",
                url: "https://www.solucioneslaprimavera.com/",
                logo: "https://i.imgur.com/3OZU62r.png",
                logonegro: "https://i.imgur.com/tJ9Nr2z.png",
                bgClass: "bg-gray"
            },
            {
                cell: "cell-slot2",
                name: "Santa María Vera",
                url: "https://inmobiliariasantamariavera.com/",
                logo: "https://i.imgur.com/JoMeVmg.png",
                logonegro: "https://i.imgur.com/p5cVes5.png",
                bgClass: "bg-black"
            },
            {
                cell: "cell-slot3",
                name: "Rocha",
                url: "www.rochafincaraiz.com",
                logo: "https://i.imgur.com/6g9dE1m.png",
                logonegro: "https://i.imgur.com/NIh6RSO.png",
                bgClass: "bg-gray",
                sizePct: 90
                // más grande solo este
            },
            {
                cell: "cell-slot4",
                name: "Inmobiliaria JP Escobar",
                url: "https://www.inmobiliariajpescobar.com.co/",
                logo: "https://i.imgur.com/qplz1JN.png",
                logonegro: "https://i.imgur.com/wCVwW3q.png",
                bgClass: "bg-black"
            },
            {
                cell: "cell-slot5",
                name: "Casa Honor Inmobiliaria",
                url: "https://casahonorinmobiliaria.com/",
                logo: "https://i.imgur.com/QC7bWHR.png",
                logonegro: "https://i.imgur.com/RlRINvm.png",
                bgClass: "bg-black"
            },
            // cell-slot6 se usa como ROTACIÓN
        ];

        const ROTATE_CELL_ID = "cell-slot6";
        const ROTATE_MS = 10000;

        /* Aliados que rotan en cell-slot6 */
        const ROTATE_ITEMS = [
            {
                name: "Asuntos inmobiliarios",
                url: "https://www.facebook.com/figueroayasociadoshuila/?locale=es_LA",
                logo: "https://i.imgur.com/Bgq3Q4D.png",
                logonegro: "https://i.imgur.com/xXwO4mk.png",
                sizePct: 84
            },
            {
                name: "VR Design (variación)",
                url: "https://aliado.com",
                logo: "https://i.imgur.com/gaR7Xq0.png",
                logonegro: "https://i.imgur.com/fkgcSSK.png"
            }
        ];

        /* === Preload para evitar “parpadeo” =================================== */
        const preloadCache = new Set();
        function preload(src) {
            if (!src || preloadCache.has(src)) return;
            const im = new Image();
            im.src = src;
            preloadCache.add(src);
        }

        /* === Helper: overlay dorado =========================================== */
        function buildOverlay() {
            const ov = document.createElement("div");
            ov.style.position = "absolute";
            ov.style.inset = "0";
            ov.style.background = "#be8939";
            ov.style.opacity = "0";
            ov.style.pointerEvents = "none";
            ov.style.zIndex = "0";
            ov.style.willChange = "opacity";
            ov.style.transition = `opacity ${HOVER_MS}ms ${HOVER_EASE}`;
            return ov;
        }

        /* === Helper: anchor con doble imagen (sin hover en imágenes) ========== */
        function buildAnchor({ name, url, logo, logonegro, sizePct = 72 }) {
            const a = document.createElement("a");
            a.href = url; a.target = "_blank"; a.rel = "noopener";
            a.setAttribute("aria-label", name);

            const wrap = document.createElement("div");
            wrap.style.position = "relative";
            wrap.style.width = "100%";
            wrap.style.height = "100%";
            wrap.style.display = "grid";
            wrap.style.placeItems = "center";
            wrap.style.zIndex = "1";

            const size = `${sizePct}%`;

            // Base (normal)
            const imgBase = document.createElement("img");
            imgBase.src = logo;
            imgBase.alt = name;
            imgBase.loading = "lazy";
            imgBase.decoding = "async";
            imgBase.style.maxWidth = size;
            imgBase.style.maxHeight = size;
            imgBase.style.objectFit = "contain";
            imgBase.style.opacity = "1";
            imgBase.style.transition = `opacity ${HOVER_MS}ms ${HOVER_EASE}`;
            imgBase.style.backfaceVisibility = "hidden";
            imgBase.style.transform = "none";
            imgBase.style.willChange = "opacity";
            wrap.appendChild(imgBase);

            // Negra (hover)
            let imgNegra = null;
            if (logonegro) {
                preload(logonegro);
                imgNegra = document.createElement("img");
                imgNegra.src = logonegro;
                imgNegra.alt = `${name} (negro)`;
                imgNegra.loading = "lazy";
                imgNegra.decoding = "async";
                imgNegra.style.position = "absolute";
                imgNegra.style.inset = "0";
                imgNegra.style.margin = "auto";
                imgNegra.style.maxWidth = size;
                imgNegra.style.maxHeight = size;
                imgNegra.style.objectFit = "contain";
                imgNegra.style.opacity = "0";
                imgNegra.style.transform = "none";
                imgNegra.style.willChange = "opacity";
                imgNegra.style.transition = `opacity ${HOVER_MS}ms ${HOVER_EASE}`;
                imgNegra.style.pointerEvents = "none";
                imgNegra.style.backfaceVisibility = "hidden";
                wrap.appendChild(imgNegra);
            }

            a.appendChild(wrap);
            return { anchor: a, imgBase, imgNegra };
        }

        /* === Monta una celda =================================================== */
        function mountLogo(cellId, { name, url, logo, logonegro, bgClass, sizePct }) {
            const cell = document.getElementById(cellId);
            if (!cell) return;

            // Fondo base por clase
            cell.classList.remove("bg-black", "bg-gray");
            if (bgClass) cell.classList.add(bgClass);

            // Limpiar
            cell.innerHTML = "";

            // Overlay dorado
            const overlay = buildOverlay();
            cell.appendChild(overlay);

            // Anchor + doble imagen (acepta sizePct)
            const { anchor, imgBase, imgNegra } = buildAnchor({ name, url, logo, logonegro, sizePct });
            cell.appendChild(anchor);

            // Hover sin efectos en imágenes (solo opacidad + overlay)
            if (imgNegra) {
                cell.addEventListener("pointerenter", () => {
                    overlay.style.opacity = "1";
                    imgBase.style.opacity = "0";
                    imgNegra.style.opacity = "1";
                });
                cell.addEventListener("pointerleave", () => {
                    overlay.style.opacity = "0";
                    imgBase.style.opacity = "1";
                    imgNegra.style.opacity = "0";
                });
            } else {
                cell.addEventListener("pointerenter", () => { overlay.style.opacity = "1"; });
                cell.addEventListener("pointerleave", () => { overlay.style.opacity = "0"; });
            }

            // Blindaje por si hay reglas globales de hover con transform
            imgBase.style.setProperty("transform", "none", "important");
            if (imgNegra) imgNegra.style.setProperty("transform", "none", "important");
        }

        /* === Revelado por scroll (grupal, secuencial y robusto) =============== */
        function setupRevealGroups() {
            // Marcar miembros de cada grupo
            REVEAL_STEPS.forEach((ids, gIdx) => {
                ids.forEach(id => {
                    const el = document.getElementById(id);
                    if (!el) return;
                    el.classList.add("reveal");
                    el.dataset.group = String(gIdx); // 0..N-1
                });
            });

            let nextGroupToReveal = 0;

            // Helper: ¿algún elemento del grupo está suficientemente visible?
            function anyElementInViewport(groupIdx) {
                const els = document.querySelectorAll(`.reveal[data-group="${groupIdx}"]`);
                const vh = window.innerHeight || document.documentElement.clientHeight;
                for (const el of els) {
                    const r = el.getBoundingClientRect();
                    const visibleH = Math.min(r.bottom, vh) - Math.max(r.top, 0);
                    const needed = Math.max(1, 0.25 * r.height); // ~25% visible
                    if (visibleH >= needed) return true;
                }
                return false;
            }

            // Revela en orden tantos grupos como ya estén visibles (en cascada)
            function drain() {
                let progressed = false;
                while (anyElementInViewport(nextGroupToReveal)) {
                    const ids = REVEAL_STEPS[nextGroupToReveal] || [];
                    ids.forEach(id => {
                        const el = document.getElementById(id);
                        if (el) el.classList.add("is-revealed");
                    });
                    nextGroupToReveal++;
                    progressed = true;
                }
                return progressed;
            }

            // Observa TODAS las celdas con reveal (no solo un “centinela”)
            const io = new IntersectionObserver(
                entries => {
                    // procesar de arriba hacia abajo
                    entries.sort((a, b) => a.boundingClientRect.top - b.boundingClientRect.top);
                    for (const entry of entries) {
                        if (!entry.isIntersecting) continue;
                        const gIdx = Number(entry.target.dataset.group);
                        if (gIdx === nextGroupToReveal) {
                            drain(); // revela este y los siguientes si ya están visibles
                        }
                    }
                },
                { threshold: 0.25, rootMargin: "0px 0px -10% 0px" }
            );

            document.querySelectorAll(".reveal").forEach(el => io.observe(el));

            // Primer drenado por si hay grupos ya en viewport al cargar
            drain();

            // Recalcular en resize (por si cambian alturas y entran en viewport)
            window.addEventListener("resize", () => { drain(); }, { passive: true });
        }

        /* === Render fijo + Rotación =========================================== */
        let rotateTimer = null;
        function startRotation(rotateCell) {
            if (!ROTATE_ITEMS.length) return;
            let idx = 0;
            const paint = () => {
                mountLogo(ROTATE_CELL_ID, { ...ROTATE_ITEMS[idx % ROTATE_ITEMS.length], bgClass: "bg-gray" });
            };
            paint();
            rotateTimer = setInterval(() => {
                rotateCell.classList.add("fade-enter");
                paint();
                requestAnimationFrame(() => rotateCell.classList.add("fade-active"));
                setTimeout(() => rotateCell.classList.remove("fade-enter", "fade-active"), 300);
                idx++;
            }, ROTATE_MS);
        }

        function renderDesktop() {
            // Fijos
            DESK_SLOTS.forEach(s => mountLogo(s.cell, s));

            // Rotación
            const rotateCell = document.getElementById(ROTATE_CELL_ID);
            if (!rotateCell) return;
            rotateCell.classList.remove("bg-gray");
            rotateCell.classList.add("bg-black");

            if (ROTATE_ITEMS.length) {
                startRotation(rotateCell);
                // Pausa la rotación al hover para evitar micro jank
                rotateCell.addEventListener("pointerenter", () => { if (rotateTimer) { clearInterval(rotateTimer); rotateTimer = null; } });
                rotateCell.addEventListener("pointerleave", () => { if (!rotateTimer) startRotation(rotateCell); });
            }

            // Revelado grupal secuencial
            setupRevealGroups();
        }

        document.addEventListener("DOMContentLoaded", renderDesktop);

        /* ====== Configuración general ====== */
        const MOBILE_ROTATE_MS = 10000; // cada cuánto reubicar el rotatorio (edita a tu gusto)
        const REVEAL_GROUPS_M = [
            ["m-title"],
            ["m-img1", "m-slot1"],           // grupo 1
            ["m-slot2"],                    // grupo 2
            ["m-slot3", "m-slot4", "m-slot6"],// grupo 3 (puedes ajustar)
            ["m-slot5"]                     // grupo 4
        ];

        /* ====== FONDOS FIJOS POR CASILLA (no rotan) ======
           Ajusta el patrón aquí si quieres cambiar el ajedrezado. */
        const MOBILE_BG_BY_SLOT = {
            "m-slot1": "bg-black",
            "m-slot2": "bg-gray",
            "m-slot3": "bg-gray",
            "m-slot4": "bg-black",
            "m-slot5": "bg-black", // Jovel dorado
            "m-slot6": "bg-gray"
        };

        /* ====== Datos de aliados (solo contenido: name/url/logo) ======
           OJO: Sin 'bg' aquí; los fondos vienen de MOBILE_BG_BY_SLOT. */
        const MOBILE_ITEMS = {
            "m-slot1": {
                name: "Soluciones La Primavera",
                url: "https://www.solucioneslaprimavera.com/",
                logo: "https://i.imgur.com/3OZU62r.png"
            },
            // m-slot2 es el rotatorio (definido abajo)
            "m-slot3": {
                name: "Asuntos Inmobiliarios",
                url: "https://www.facebook.com/figueroayasociadoshuila/?locale=es_LA",
                logo: "https://i.imgur.com/Bgq3Q4D.png"
            },
            "m-slot4": {
                name: "Inmobiliaria Rocha",
                url: "https://www.rochafincaraiz.com/",
                logo: "https://i.imgur.com/6g9dE1m.png",
                sizePct: 90
            },
            "m-slot5": {
                name: "Inmobiliaria Jovel Muñoz",
                url: "https://www.inmobiliariajovelmunoz.com.co/",
                logo: "https://i.imgur.com/YdhrBvG.png" // Jovel DORADO (móvil)
            },
            "m-slot6": {
                name: "Casa Honor Inmobiliaria",
                url: "https://casahonorinmobiliaria.com/",
                logo: "https://i.imgur.com/QC7bWHR.png"
            }
        };

       /* Ítems rotatorios: aparecerán uno a la vez, reubicándose aleatoriamente */
const MOBILE_ROTATORS = [
  {
    // (el que ya tenías)
    name: "Inmobiliaria Santa María Vera",
    url: "https://inmobiliariasantamariavera.com/",
    logo: "https://i.imgur.com/JoMeVmg.png"
  },
  {
    // NUEVO ALIADO ROTATORIO — reemplaza con tus datos reales
    name: "JP",
    url: "https://www.inmobiliariajpescobar.com.co/",
    logo: "https://i.imgur.com/qplz1JN.png"
  }
];

// índice de rotación
let MOBILE_ROT_IDX = 0;
function currentMobileRotator() {
  return MOBILE_ROTATORS[MOBILE_ROT_IDX % MOBILE_ROTATORS.length];
}

        /* ====== Helpers ====== */
        function applyFixedBackgrounds() {
            Object.entries(MOBILE_BG_BY_SLOT).forEach(([slotId, bgClass]) => {
                const cell = document.getElementById(slotId);
                if (!cell) return;
                cell.classList.remove("bg-black", "bg-gray");
                if (bgClass) cell.classList.add(bgClass);
            });
        }

        function mountCell(cellId, { name, url, logo, sizePct = 72 }) {
  const cell = document.getElementById(cellId);
  if (!cell) return;
  cell.innerHTML = "";

  const a = document.createElement("a");
  a.href = url; a.target = "_blank"; a.rel = "noopener";
  a.setAttribute("aria-label", name);

  const img = document.createElement("img");
  img.src = logo;
  img.alt = name;
  img.loading = "lazy";
  img.decoding = "async";
  img.style.maxWidth = `${sizePct}%`;
  img.style.maxHeight = `${sizePct}%`;
  img.style.objectFit = "contain";

  a.appendChild(img);
  cell.appendChild(a);
}

        /* Reparte el rotatorio en una casilla aleatoria:
           - Por defecto va en m-slot2
           - Si el destino aleatorio NO es m-slot2, intercambia los contenidos */
       function randomSwapSlot2(rotatorItem) {
  const allSlots = ["m-slot1", "m-slot2", "m-slot3", "m-slot4", "m-slot5", "m-slot6"];
  const randomTarget = allSlots[Math.floor(Math.random() * allSlots.length)];

  // Construimos el mapping de contenidos (sin fondos)
  const mapping = {
    "m-slot1": MOBILE_ITEMS["m-slot1"],
    "m-slot2": rotatorItem, // por defecto el rotatorio
    "m-slot3": MOBILE_ITEMS["m-slot3"],
    "m-slot4": MOBILE_ITEMS["m-slot4"],
    "m-slot5": MOBILE_ITEMS["m-slot5"],
    "m-slot6": MOBILE_ITEMS["m-slot6"]
  };

  // Intercambio si el destino aleatorio no es m-slot2
  if (randomTarget !== "m-slot2") {
    const temp = mapping[randomTarget];
    mapping[randomTarget] = rotatorItem;
    mapping["m-slot2"] = temp;
  }
  return mapping;
}

        /* ==== Animación de entrada (grupal) ==== */
        function setupRevealMobile() {
            // marcar
            REVEAL_GROUPS_M.forEach((ids) => {
                ids.forEach(id => {
                    const el = document.getElementById(id);
                    if (!el) return;
                    el.classList.add("reveal-m");
                });
            });

            let nextGroup = 0;

            function isGroupVisible(idx) {
                const ids = REVEAL_GROUPS_M[idx] || [];
                const vh = window.innerHeight || document.documentElement.clientHeight;
                return ids.some(id => {
                    const el = document.getElementById(id);
                    if (!el) return false;
                    const r = el.getBoundingClientRect();
                    const visibleH = Math.min(r.bottom, vh) - Math.max(r.top, 0);
                    const needed = Math.max(1, 0.15 * r.height); // ~15% visible
                    return visibleH >= needed;
                });
            }

            function drain() {
                let progressed = false;
                while (isGroupVisible(nextGroup)) {
                    (REVEAL_GROUPS_M[nextGroup] || []).forEach(id => {
                        const el = document.getElementById(id);
                        if (el) el.classList.add("is-revealed");
                    });
                    nextGroup++;
                    progressed = true;
                }
                return progressed;
            }

            const io = new IntersectionObserver(() => { drain(); }, { threshold: 0.1 });
            document.querySelectorAll(".reveal-m").forEach(el => io.observe(el));
            drain();
            window.addEventListener("scroll", () => requestAnimationFrame(drain), { passive: true });
            window.addEventListener("resize", () => requestAnimationFrame(drain), { passive: true });
        }

        /* ====== Rotación periódica SOLO de contenidos (no fondos) ====== */
        function startMobileRotation() {
  setInterval(() => {
    MOBILE_ROT_IDX++; // avanza al siguiente aliado rotatorio
    const mapping = randomSwapSlot2(currentMobileRotator()); // nuevo aliado + reubicación
    Object.entries(mapping).forEach(([cellId, data]) => mountCell(cellId, data));
  }, MOBILE_ROTATE_MS);
}

        /* ====== Render ====== */
        function renderMobileAliados() {
            // 1) Fijar fondos por casilla (solo una vez)
            applyFixedBackgrounds();

            // 2) Mapear con el “al azar” para slot2
           const mapping = randomSwapSlot2(currentMobileRotator());

            // 3) Montar contenidos (logos+links)
            Object.entries(mapping).forEach(([cellId, data]) => mountCell(cellId, data));

            // 4) Animación de entrada
            setupRevealMobile();

            // 5) Rotación de contenidos con el tiempo (opcional: comenta si no quieres)
            startMobileRotation();
        }

        document.addEventListener("DOMContentLoaded", () => {
            const root = document.getElementById("aliados-m");
            if (!root) return;
            renderMobileAliados();
        });


    </script>

</body>
</html>

